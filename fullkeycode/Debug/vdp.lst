Zilog eZ80 Macro Assembler Version 4.3 (19073001) RELISTED20-Feb-23     18:52:16     page:   1


PC     Object              I  Line    Source 
                           A     1    ; Zilog eZ80 ANSI C Compiler Release 3.4
                           A     2    ; -nomodsect -optsize -noreduceopt -nopadbranch
                           A     3    ; -peephole -globalopt -localcse -const=ROM 
                           A     4    	FILE	"..\vdp.c"
                           A     5    	.assume ADL=1
                           A     6    .DEBUG "C"
                           A     7    	SEGMENT CODE
                           A     8    ;    1	#include <defines.h>
                           A     9    ;    2	#include "mos-interface.h"
                           A    10    ;    3	
                           A    11    ;    4	// Generic functions
                           A    12    ;    5	
                           A    13    ;    6	void write16bit(UINT16 w)
                           A    14    ;    7	{
040E13                     A    15    _write16bit:
                           A    16    .DEFINE "_write16bit"
                           A    17    
                           A    18    .VALUE _write16bit
                           A    19    
                           A    20    .CLASS 2
                           A    21    
                           A    22    .TYPE 65
                           A    23    
                           A    24    .ENDEF
                           A    25    
                           A    26    .BEGFUNC "write16bit",7,"_write16bit"
                           A    27    
                           A    28    .LINE 7
                           A    29    
                           A    30    .DEFINE "w"
                           A    31    
                           A    32    .CLASS 65
                           A    33    
                           A    34    .VALUE 6
                           A    35    
                           A    36    .TYPE 13
                           A    37    
                           A    38    .ENDEF
                           A    39    
040E13 DDE5                A    40    	PUSH	IX
040E15 DD210000 00         A    41    	LD	IX,0
040E1A DD39                A    42    	ADD	IX,SP
                           A    43    ;    8		putch(w & 0xFF); // write LSB
                           A    44    .LINE 8
                           A    45    
040E1C DD0706              A    46    	LD	BC,(IX+%6)
040E1F CD F1 1A 04         A    47    	CALL	__stoiu
040E23 7D                  A    48    	LD	A,L
040E24 B7ED62              A    49    	UEXT	HL
040E27 6F                  A    50    	LD	L,A
040E28 E5                  A    51    	PUSH	HL
040E29 CD 1F 19 04         A    52    	CALL	_putch
040E2D C1                  A    53    	POP	BC
                           A    54    ;    9		putch(w >> 8);	 // write MSB	
                           A    55    .LINE 9
                           A    56    
040E2E DD0706              A    57    	LD	BC,(IX+%6)
040E31 CD F1 1A 04         A    58    	CALL	__stoiu
040E35 3E08                A    59    	LD	A,%8
040E37 CD 7F 1A 04         A    60    	CALL	__ishrs_b
040E3B E5                  A    61    	PUSH	HL
040E3C CD 1F 19 04         A    62    	CALL	_putch
040E40 C1                  A    63    	POP	BC
                           A    64    ;   10	}
                           A    65    .LINE 10
                           A    66    
040E41 DDF9                A    67    	LD	SP,IX
040E43 DDE1                A    68    	POP	IX
040E45 C9                  A    69    	RET	
                           A    70    
                           A    71    
                           A    72    ;**************************** _write16bit *****
                           A    73    ;Name                         Addr/Register   S
                           A    74    ;_putch                              IMPORT  --
                           A    75    ;w                                     IX+6    
                           A    76    
                           A    77    
                           A    78    ; Stack Frame Size: 9 (bytes)
                           A    79    ;       Spill Code: 0 (instruction)
                           A    80    
                           A    81    
                           A    82    .ENDFUNC "write16bit",10,"_write16bit"
                           A    83    ;   11	
                           A    84    ;   12	void write32bit(UINT32 l)
                           A    85    ;   13	{
040E46                     A    86    _write32bit:
                           A    87    .DEFINE "_write32bit"
                           A    88    
                           A    89    .VALUE _write32bit
                           A    90    
                           A    91    .CLASS 2
                           A    92    
                           A    93    .TYPE 65
                           A    94    
                           A    95    .ENDEF
                           A    96    
                           A    97    .BEGFUNC "write32bit",13,"_write32bit"
                           A    98    
                           A    99    .LINE 13
                           A   100    
                           A   101    .DEFINE "l"
                           A   102    
                           A   103    .CLASS 65
                           A   104    
                           A   105    .VALUE 6
                           A   106    
                           A   107    .TYPE 15
                           A   108    
                           A   109    .ENDEF
                           A   110    
                           A   111    .DEFINE "temp"
                           A   112    
                           A   113    .CLASS 65
                           A   114    
                           A   115    .VALUE -4
                           A   116    
                           A   117    .TYPE 15
                           A   118    
                           A   119    .ENDEF
                           A   120    
040E46 DDE5                A   121    	PUSH	IX
040E48 DD210000 00         A   122    	LD	IX,0
040E4D DD39                A   123    	ADD	IX,SP
040E4F C5                  A   124    	PUSH	BC
040E50 3B                  A   125    	DEC	SP
                           A   126    ;   14		UINT32 temp = l;
                           A   127    ;   15		
                           A   128    ;   16		putch(temp & 0xFF); // write LSB
                           A   129    .LINE 16
                           A   130    
040E51 DD2706              A   131    	LD	HL,(IX+%6)
040E54 7D                  A   132    	LD	A,L
040E55 B7ED62              A   133    	UEXT	HL
040E58 6F                  A   134    	LD	L,A
040E59 E5                  A   135    	PUSH	HL
040E5A CD 1F 19 04         A   136    	CALL	_putch
040E5E C1                  A   137    	POP	BC
                           A   138    ;   17		temp = temp >> 8;
                           A   139    .LINE 17
                           A   140    
040E5F DD0706              A   141    	LD	BC,(IX+%6)
040E62 DD7E09              A   142    	LD	A,(IX+%9)
040E65 2E08                A   143    	LD	L,%8
040E67 CD 18 1B 04         A   144    	CALL	__lshru
040E6B DD0FFC              A   145    	LD	(IX+%FFFFFFFC),BC
040E6E DD77FF              A   146    	LD	(IX+%FFFFFFFF),A
                           A   147    ;   18		putch(temp & 0xFF);
                           A   148    .LINE 18
                           A   149    
040E71 C5E1                A   150    	LD	HL,BC
040E73 7D                  A   151    	LD	A,L
040E74 B7ED62              A   152    	UEXT	HL
040E77 6F                  A   153    	LD	L,A
040E78 E5                  A   154    	PUSH	HL
040E79 CD 1F 19 04         A   155    	CALL	_putch
040E7D C1                  A   156    	POP	BC
                           A   157    ;   19		temp = temp >> 8;
                           A   158    .LINE 19
                           A   159    
040E7E DD07FC              A   160    	LD	BC,(IX+%FFFFFFFC)
040E81 DD7EFF              A   161    	LD	A,(IX+%FFFFFFFF)
040E84 2E08                A   162    	LD	L,%8
040E86 CD 18 1B 04         A   163    	CALL	__lshru
040E8A DD0FFC              A   164    	LD	(IX+%FFFFFFFC),BC
040E8D DD77FF              A   165    	LD	(IX+%FFFFFFFF),A
                           A   166    ;   20		putch(temp & 0xFF);
                           A   167    .LINE 20
                           A   168    
040E90 C5E1                A   169    	LD	HL,BC
040E92 7D                  A   170    	LD	A,L
040E93 B7ED62              A   171    	UEXT	HL
040E96 6F                  A   172    	LD	L,A
040E97 E5                  A   173    	PUSH	HL
040E98 CD 1F 19 04         A   174    	CALL	_putch
040E9C C1                  A   175    	POP	BC
                           A   176    ;   21		temp = temp >> 8;
                           A   177    .LINE 21
                           A   178    
040E9D DD07FC              A   179    	LD	BC,(IX+%FFFFFFFC)
040EA0 DD7EFF              A   180    	LD	A,(IX+%FFFFFFFF)
040EA3 2E08                A   181    	LD	L,%8
040EA5 CD 18 1B 04         A   182    	CALL	__lshru
040EA9 DD0FFC              A   183    	LD	(IX+%FFFFFFFC),BC
040EAC DD77FF              A   184    	LD	(IX+%FFFFFFFF),A
                           A   185    ;   22		putch(temp & 0xFF);
                           A   186    .LINE 22
                           A   187    
040EAF C5E1                A   188    	LD	HL,BC
040EB1 7D                  A   189    	LD	A,L
040EB2 B7ED62              A   190    	UEXT	HL
040EB5 6F                  A   191    	LD	L,A
040EB6 E5                  A   192    	PUSH	HL
040EB7 CD 1F 19 04         A   193    	CALL	_putch
040EBB C1                  A   194    	POP	BC
                           A   195    ;   23		return;	
                           A   196    ;   24	}
                           A   197    .LINE 24
                           A   198    
040EBC DDF9                A   199    	LD	SP,IX
040EBE DDE1                A   200    	POP	IX
040EC0 C9                  A   201    	RET	
                           A   202    
                           A   203    
                           A   204    ;**************************** _write32bit *****
                           A   205    ;Name                         Addr/Register   S
                           A   206    ;_putch                              IMPORT  --
                           A   207    ;temp                                  IX-4    
                           A   208    ;l                                     IX+6    
                           A   209    
                           A   210    
                           A   211    ; Stack Frame Size: 16 (bytes)
                           A   212    ;       Spill Code: 0 (instruction)
                           A   213    
                           A   214    
                           A   215    .ENDFUNC "write32bit",24,"_write32bit"
                           A   216    ;   25	
                           A   217    ;   26	void vdp_mode(unsigned char mode)
                           A   218    ;   27	{
040EC1                     A   219    _vdp_mode:
                           A   220    .DEFINE "_vdp_mode"
                           A   221    
                           A   222    .VALUE _vdp_mode
                           A   223    
                           A   224    .CLASS 2
                           A   225    
                           A   226    .TYPE 65
                           A   227    
                           A   228    .ENDEF
                           A   229    
                           A   230    .BEGFUNC "vdp_mode",27,"_vdp_mode"
                           A   231    
                           A   232    .LINE 27
                           A   233    
                           A   234    .DEFINE "mode"
                           A   235    
                           A   236    .CLASS 65
                           A   237    
                           A   238    .VALUE 6
                           A   239    
                           A   240    .TYPE 12
                           A   241    
                           A   242    .ENDEF
                           A   243    
040EC1 DDE5                A   244    	PUSH	IX
040EC3 DD210000 00         A   245    	LD	IX,0
040EC8 DD39                A   246    	ADD	IX,SP
                           A   247    ;   28	    putch(22);
                           A   248    .LINE 28
                           A   249    
040ECA 01160000            A   250    	LD	BC,22
040ECE C5                  A   251    	PUSH	BC
040ECF CD 1F 19 04         A   252    	CALL	_putch
040ED3 C1                  A   253    	POP	BC
                           A   254    ;   29	    putch(mode);
                           A   255    .LINE 29
                           A   256    
040ED4 DD7E06              A   257    	LD	A,(IX+%6)
040ED7 B7ED62              A   258    	UEXT	HL
040EDA 6F                  A   259    	LD	L,A
040EDB E5                  A   260    	PUSH	HL
040EDC CD 1F 19 04         A   261    	CALL	_putch
040EE0 C1                  A   262    	POP	BC
                           A   263    ;   30	}
                           A   264    .LINE 30
                           A   265    
040EE1 DDF9                A   266    	LD	SP,IX
040EE3 DDE1                A   267    	POP	IX
040EE5 C9                  A   268    	RET	
                           A   269    
                           A   270    
                           A   271    ;**************************** _vdp_mode *******
                           A   272    ;Name                         Addr/Register   S
                           A   273    ;_putch                              IMPORT  --
                           A   274    ;mode                                  IX+6    
                           A   275    
                           A   276    
                           A   277    ; Stack Frame Size: 9 (bytes)
                           A   278    ;       Spill Code: 0 (instruction)
                           A   279    
                           A   280    
                           A   281    .ENDFUNC "vdp_mode",30,"_vdp_mode"
                           A   282    ;   31	
                           A   283    ;   32	// Text functions
                           A   284    ;   33	void vdp_cls()
                           A   285    ;   34	{
040EE6                     A   286    _vdp_cls:
                           A   287    .DEFINE "_vdp_cls"
                           A   288    
                           A   289    .VALUE _vdp_cls
                           A   290    
                           A   291    .CLASS 2
                           A   292    
                           A   293    .TYPE 65
                           A   294    
                           A   295    .ENDEF
                           A   296    
                           A   297    .BEGFUNC "vdp_cls",34,"_vdp_cls"
                           A   298    
040EE6 DDE5                A   299    	PUSH	IX
040EE8 DD210000 00         A   300    	LD	IX,0
040EED DD39                A   301    	ADD	IX,SP
                           A   302    ;   35	    putch(12);
                           A   303    .LINE 35
                           A   304    
040EEF 010C0000            A   305    	LD	BC,12
040EF3 C5                  A   306    	PUSH	BC
040EF4 CD 1F 19 04         A   307    	CALL	_putch
040EF8 C1                  A   308    	POP	BC
                           A   309    ;   36	}
                           A   310    .LINE 36
                           A   311    
040EF9 DDF9                A   312    	LD	SP,IX
040EFB DDE1                A   313    	POP	IX
040EFD C9                  A   314    	RET	
                           A   315    
                           A   316    
                           A   317    ;**************************** _vdp_cls ********
                           A   318    ;Name                         Addr/Register   S
                           A   319    ;_putch                              IMPORT  --
                           A   320    
                           A   321    
                           A   322    ; Stack Frame Size: 6 (bytes)
                           A   323    ;       Spill Code: 0 (instruction)
                           A   324    
                           A   325    
                           A   326    .ENDFUNC "vdp_cls",36,"_vdp_cls"
                           A   327    ;   37	
                           A   328    ;   38	void vdp_cursorHome()
                           A   329    ;   39	{
040EFE                     A   330    _vdp_cursorHome:
                           A   331    .DEFINE "_vdp_cursorHome"
                           A   332    
                           A   333    .VALUE _vdp_cursorHome
                           A   334    
                           A   335    .CLASS 2
                           A   336    
                           A   337    .TYPE 65
                           A   338    
                           A   339    .ENDEF
                           A   340    
                           A   341    .BEGFUNC "vdp_cursorHome",39,"_vdp_cursorHome"
                           A   342    
040EFE DDE5                A   343    	PUSH	IX
040F00 DD210000 00         A   344    	LD	IX,0
040F05 DD39                A   345    	ADD	IX,SP
                           A   346    ;   40	    putch(30);
                           A   347    .LINE 40
                           A   348    
040F07 011E0000            A   349    	LD	BC,30
040F0B C5                  A   350    	PUSH	BC
040F0C CD 1F 19 04         A   351    	CALL	_putch
040F10 C1                  A   352    	POP	BC
                           A   353    ;   41	}
                           A   354    .LINE 41
                           A   355    
040F11 DDF9                A   356    	LD	SP,IX
040F13 DDE1                A   357    	POP	IX
040F15 C9                  A   358    	RET	
                           A   359    
                           A   360    
                           A   361    ;**************************** _vdp_cursorHome *
                           A   362    ;Name                         Addr/Register   S
                           A   363    ;_putch                              IMPORT  --
                           A   364    
                           A   365    
                           A   366    ; Stack Frame Size: 6 (bytes)
                           A   367    ;       Spill Code: 0 (instruction)
                           A   368    
                           A   369    
                           A   370    .ENDFUNC "vdp_cursorHome",41,"_vdp_cursorHome"
                           A   371    ;   42	
                           A   372    ;   43	void vdp_cursorUp()
                           A   373    ;   44	{
040F16                     A   374    _vdp_cursorUp:
                           A   375    .DEFINE "_vdp_cursorUp"
                           A   376    
                           A   377    .VALUE _vdp_cursorUp
                           A   378    
                           A   379    .CLASS 2
                           A   380    
                           A   381    .TYPE 65
                           A   382    
                           A   383    .ENDEF
                           A   384    
                           A   385    .BEGFUNC "vdp_cursorUp",44,"_vdp_cursorUp"
                           A   386    
040F16 DDE5                A   387    	PUSH	IX
040F18 DD210000 00         A   388    	LD	IX,0
040F1D DD39                A   389    	ADD	IX,SP
                           A   390    ;   45	    putch(11);
                           A   391    .LINE 45
                           A   392    
040F1F 010B0000            A   393    	LD	BC,11
040F23 C5                  A   394    	PUSH	BC
040F24 CD 1F 19 04         A   395    	CALL	_putch
040F28 C1                  A   396    	POP	BC
                           A   397    ;   46	}
                           A   398    .LINE 46
                           A   399    
040F29 DDF9                A   400    	LD	SP,IX
040F2B DDE1                A   401    	POP	IX
040F2D C9                  A   402    	RET	
                           A   403    
                           A   404    
                           A   405    ;**************************** _vdp_cursorUp ***
                           A   406    ;Name                         Addr/Register   S
                           A   407    ;_putch                              IMPORT  --
                           A   408    
                           A   409    
                           A   410    ; Stack Frame Size: 6 (bytes)
                           A   411    ;       Spill Code: 0 (instruction)
                           A   412    
                           A   413    
                           A   414    .ENDFUNC "vdp_cursorUp",46,"_vdp_cursorUp"
                           A   415    ;   47	
                           A   416    ;   48	void vdp_cursorGoto(unsigned char x, un
                           A   417    ;   49	{
040F2E                     A   418    _vdp_cursorGoto:
                           A   419    .DEFINE "_vdp_cursorGoto"
                           A   420    
                           A   421    .VALUE _vdp_cursorGoto
                           A   422    
                           A   423    .CLASS 2
                           A   424    
                           A   425    .TYPE 65
                           A   426    
                           A   427    .ENDEF
                           A   428    
                           A   429    .BEGFUNC "vdp_cursorGoto",49,"_vdp_cursorGoto"
                           A   430    
                           A   431    .LINE 49
                           A   432    
                           A   433    .DEFINE "x"
                           A   434    
                           A   435    .CLASS 65
                           A   436    
                           A   437    .VALUE 6
                           A   438    
                           A   439    .TYPE 12
                           A   440    
                           A   441    .ENDEF
                           A   442    
                           A   443    .DEFINE "y"
                           A   444    
                           A   445    .CLASS 65
                           A   446    
                           A   447    .VALUE 9
                           A   448    
                           A   449    .TYPE 12
                           A   450    
                           A   451    .ENDEF
                           A   452    
040F2E DDE5                A   453    	PUSH	IX
040F30 DD210000 00         A   454    	LD	IX,0
040F35 DD39                A   455    	ADD	IX,SP
                           A   456    ;   50	    putch(31); // TAB
                           A   457    .LINE 50
                           A   458    
040F37 011F0000            A   459    	LD	BC,31
040F3B C5                  A   460    	PUSH	BC
040F3C CD 1F 19 04         A   461    	CALL	_putch
040F40 C1                  A   462    	POP	BC
                           A   463    ;   51	    putch(x);
                           A   464    .LINE 51
                           A   465    
040F41 DD7E06              A   466    	LD	A,(IX+%6)
040F44 B7ED62              A   467    	UEXT	HL
040F47 6F                  A   468    	LD	L,A
040F48 E5                  A   469    	PUSH	HL
040F49 CD 1F 19 04         A   470    	CALL	_putch
040F4D C1                  A   471    	POP	BC
                           A   472    ;   52	    putch(y);
                           A   473    .LINE 52
                           A   474    
040F4E DD7E09              A   475    	LD	A,(IX+%9)
040F51 B7ED62              A   476    	UEXT	HL
040F54 6F                  A   477    	LD	L,A
040F55 E5                  A   478    	PUSH	HL
040F56 CD 1F 19 04         A   479    	CALL	_putch
040F5A C1                  A   480    	POP	BC
                           A   481    ;   53	}
                           A   482    .LINE 53
                           A   483    
040F5B DDF9                A   484    	LD	SP,IX
040F5D DDE1                A   485    	POP	IX
040F5F C9                  A   486    	RET	
                           A   487    
                           A   488    
                           A   489    ;**************************** _vdp_cursorGoto *
                           A   490    ;Name                         Addr/Register   S
                           A   491    ;_putch                              IMPORT  --
                           A   492    ;y                                     IX+9    
                           A   493    ;x                                     IX+6    
                           A   494    
                           A   495    
                           A   496    ; Stack Frame Size: 12 (bytes)
                           A   497    ;       Spill Code: 0 (instruction)
                           A   498    
                           A   499    
                           A   500    .ENDFUNC "vdp_cursorGoto",53,"_vdp_cursorGoto"
                           A   501    ;   54	
                           A   502    ;   55	void vdp_colour(unsigned char foregroun
                           A   503    ;   56	{
040F60                     A   504    _vdp_colour:
                           A   505    .DEFINE "_vdp_colour"
                           A   506    
                           A   507    .VALUE _vdp_colour
                           A   508    
                           A   509    .CLASS 2
                           A   510    
                           A   511    .TYPE 65
                           A   512    
                           A   513    .ENDEF
                           A   514    
                           A   515    .BEGFUNC "vdp_colour",56,"_vdp_colour"
                           A   516    
                           A   517    .LINE 56
                           A   518    
                           A   519    .DEFINE "foreground"
                           A   520    
                           A   521    .CLASS 65
                           A   522    
                           A   523    .VALUE 6
                           A   524    
                           A   525    .TYPE 12
                           A   526    
                           A   527    .ENDEF
                           A   528    
                           A   529    .DEFINE "r"
                           A   530    
                           A   531    .CLASS 65
                           A   532    
                           A   533    .VALUE 9
                           A   534    
                           A   535    .TYPE 12
                           A   536    
                           A   537    .ENDEF
                           A   538    
                           A   539    .DEFINE "g"
                           A   540    
                           A   541    .CLASS 65
                           A   542    
                           A   543    .VALUE 12
                           A   544    
                           A   545    .TYPE 12
                           A   546    
                           A   547    .ENDEF
                           A   548    
                           A   549    .DEFINE "b"
                           A   550    
                           A   551    .CLASS 65
                           A   552    
                           A   553    .VALUE 15
                           A   554    
                           A   555    .TYPE 12
                           A   556    
                           A   557    .ENDEF
                           A   558    
040F60 DDE5                A   559    	PUSH	IX
040F62 DD210000 00         A   560    	LD	IX,0
040F67 DD39                A   561    	ADD	IX,SP
040F69 C5                  A   562    	PUSH	BC
                           A   563    ;   57	    putch(17); // COLOUR
                           A   564    .LINE 57
                           A   565    
040F6A 01110000            A   566    	LD	BC,17
040F6E C5                  A   567    	PUSH	BC
040F6F CD 1F 19 04         A   568    	CALL	_putch
040F73 C1                  A   569    	POP	BC
                           A   570    ;   58	    putch(!foreground);
                           A   571    .LINE 58
                           A   572    
040F74 DD7E06              A   573    	LD	A,(IX+%6)
040F77 B7                  A   574    	OR	A,A
040F78 20 09               A   575    	JR	NZ,L_8
040F7A 01010000            A   576    	LD	BC,1
040F7E DD0FFD              A   577    	LD	(IX+%FFFFFFFD),BC
040F81 18 07               A   578    	JR	L_9
040F83                     A   579    L_8:
040F83 01000000            A   580    	LD	BC,0
040F87 DD0FFD              A   581    	LD	(IX+%FFFFFFFD),BC
040F8A                     A   582    L_9:
040F8A DD07FD              A   583    	LD	BC,(IX+%FFFFFFFD)
040F8D C5                  A   584    	PUSH	BC
040F8E CD 1F 19 04         A   585    	CALL	_putch
040F92 C1                  A   586    	POP	BC
                           A   587    ;   59	    putch(r);
                           A   588    .LINE 59
                           A   589    
040F93 DD7E09              A   590    	LD	A,(IX+%9)
040F96 B7ED62              A   591    	UEXT	HL
040F99 6F                  A   592    	LD	L,A
040F9A E5                  A   593    	PUSH	HL
040F9B CD 1F 19 04         A   594    	CALL	_putch
040F9F C1                  A   595    	POP	BC
                           A   596    ;   60	    putch(g);
                           A   597    .LINE 60
                           A   598    
040FA0 DD7E0C              A   599    	LD	A,(IX+%C)
040FA3 B7ED62              A   600    	UEXT	HL
040FA6 6F                  A   601    	LD	L,A
040FA7 E5                  A   602    	PUSH	HL
040FA8 CD 1F 19 04         A   603    	CALL	_putch
040FAC C1                  A   604    	POP	BC
                           A   605    ;   61	    putch(b);
                           A   606    .LINE 61
                           A   607    
040FAD DD7E0F              A   608    	LD	A,(IX+%F)
040FB0 B7ED62              A   609    	UEXT	HL
040FB3 6F                  A   610    	LD	L,A
040FB4 E5                  A   611    	PUSH	HL
040FB5 CD 1F 19 04         A   612    	CALL	_putch
040FB9 C1                  A   613    	POP	BC
                           A   614    ;   62	}
                           A   615    .LINE 62
                           A   616    
040FBA DDF9                A   617    	LD	SP,IX
040FBC DDE1                A   618    	POP	IX
040FBE C9                  A   619    	RET	
                           A   620    
                           A   621    
                           A   622    ;**************************** _vdp_colour *****
                           A   623    ;Name                         Addr/Register   S
                           A   624    ;_putch                              IMPORT  --
                           A   625    ;temp10                                IX-3    
                           A   626    ;b                                    IX+15    
                           A   627    ;g                                    IX+12    
                           A   628    ;r                                     IX+9    
                           A   629    ;foreground                            IX+6    
                           A   630    
                           A   631    
                           A   632    ; Stack Frame Size: 21 (bytes)
                           A   633    ;       Spill Code: 0 (instruction)
                           A   634    
                           A   635    
                           A   636    .ENDFUNC "vdp_colour",62,"_vdp_colour"
                           A   637    ;   63	
                           A   638    ;   64	void vdp_fgcolour(unsigned char r, unsi
                           A   639    ;   65	{
040FBF                     A   640    _vdp_fgcolour:
                           A   641    .DEFINE "_vdp_fgcolour"
                           A   642    
                           A   643    .VALUE _vdp_fgcolour
                           A   644    
                           A   645    .CLASS 2
                           A   646    
                           A   647    .TYPE 65
                           A   648    
                           A   649    .ENDEF
                           A   650    
                           A   651    .BEGFUNC "vdp_fgcolour",65,"_vdp_fgcolour"
                           A   652    
                           A   653    .LINE 65
                           A   654    
                           A   655    .DEFINE "r"
                           A   656    
                           A   657    .CLASS 65
                           A   658    
                           A   659    .VALUE 6
                           A   660    
                           A   661    .TYPE 12
                           A   662    
                           A   663    .ENDEF
                           A   664    
                           A   665    .DEFINE "g"
                           A   666    
                           A   667    .CLASS 65
                           A   668    
                           A   669    .VALUE 9
                           A   670    
                           A   671    .TYPE 12
                           A   672    
                           A   673    .ENDEF
                           A   674    
                           A   675    .DEFINE "b"
                           A   676    
                           A   677    .CLASS 65
                           A   678    
                           A   679    .VALUE 12
                           A   680    
                           A   681    .TYPE 12
                           A   682    
                           A   683    .ENDEF
                           A   684    
040FBF DDE5                A   685    	PUSH	IX
040FC1 DD210000 00         A   686    	LD	IX,0
040FC6 DD39                A   687    	ADD	IX,SP
                           A   688    ;   66	    vdp_colour(1,r,g,b);
                           A   689    .LINE 66
                           A   690    
040FC8 DD4E0C              A   691    	LD	C,(IX+%C)
040FCB 0600                A   692    	LD	B,%0
040FCD C5                  A   693    	PUSH	BC
040FCE DD4E09              A   694    	LD	C,(IX+%9)
040FD1 C5                  A   695    	PUSH	BC
040FD2 DD4E06              A   696    	LD	C,(IX+%6)
040FD5 C5                  A   697    	PUSH	BC
040FD6 01010000            A   698    	LD	BC,1
040FDA C5                  A   699    	PUSH	BC
040FDB CD 60 0F 04         A   700    	CALL	_vdp_colour
040FDF C1                  A   701    	POP	BC
040FE0 C1                  A   702    	POP	BC
040FE1 C1                  A   703    	POP	BC
040FE2 C1                  A   704    	POP	BC
                           A   705    ;   67	}
                           A   706    .LINE 67
                           A   707    
040FE3 DDF9                A   708    	LD	SP,IX
040FE5 DDE1                A   709    	POP	IX
040FE7 C9                  A   710    	RET	
                           A   711    
                           A   712    
                           A   713    ;**************************** _vdp_fgcolour ***
                           A   714    ;Name                         Addr/Register   S
                           A   715    ;b                                    IX+12    
                           A   716    ;g                                     IX+9    
                           A   717    ;r                                     IX+6    
                           A   718    
                           A   719    
                           A   720    ; Stack Frame Size: 15 (bytes)
                           A   721    ;       Spill Code: 0 (instruction)
                           A   722    
                           A   723    
                           A   724    .ENDFUNC "vdp_fgcolour",67,"_vdp_fgcolour"
                           A   725    ;   68	
                           A   726    ;   69	void vdp_bgcolour(unsigned char r, unsi
                           A   727    ;   70	{
040FE8                     A   728    _vdp_bgcolour:
                           A   729    .DEFINE "_vdp_bgcolour"
                           A   730    
                           A   731    .VALUE _vdp_bgcolour
                           A   732    
                           A   733    .CLASS 2
                           A   734    
                           A   735    .TYPE 65
                           A   736    
                           A   737    .ENDEF
                           A   738    
                           A   739    .BEGFUNC "vdp_bgcolour",70,"_vdp_bgcolour"
                           A   740    
                           A   741    .LINE 70
                           A   742    
                           A   743    .DEFINE "r"
                           A   744    
                           A   745    .CLASS 65
                           A   746    
                           A   747    .VALUE 6
                           A   748    
                           A   749    .TYPE 12
                           A   750    
                           A   751    .ENDEF
                           A   752    
                           A   753    .DEFINE "g"
                           A   754    
                           A   755    .CLASS 65
                           A   756    
                           A   757    .VALUE 9
                           A   758    
                           A   759    .TYPE 12
                           A   760    
                           A   761    .ENDEF
                           A   762    
                           A   763    .DEFINE "b"
                           A   764    
                           A   765    .CLASS 65
                           A   766    
                           A   767    .VALUE 12
                           A   768    
                           A   769    .TYPE 12
                           A   770    
                           A   771    .ENDEF
                           A   772    
040FE8 DDE5                A   773    	PUSH	IX
040FEA DD210000 00         A   774    	LD	IX,0
040FEF DD39                A   775    	ADD	IX,SP
                           A   776    ;   71	    vdp_colour(0,r,g,b);
                           A   777    .LINE 71
                           A   778    
040FF1 DD4E0C              A   779    	LD	C,(IX+%C)
040FF4 0600                A   780    	LD	B,%0
040FF6 C5                  A   781    	PUSH	BC
040FF7 DD4E09              A   782    	LD	C,(IX+%9)
040FFA C5                  A   783    	PUSH	BC
040FFB DD4E06              A   784    	LD	C,(IX+%6)
040FFE C5                  A   785    	PUSH	BC
040FFF 01000000            A   786    	LD	BC,0
041003 C5                  A   787    	PUSH	BC
041004 CD 60 0F 04         A   788    	CALL	_vdp_colour
041008 C1                  A   789    	POP	BC
041009 C1                  A   790    	POP	BC
04100A C1                  A   791    	POP	BC
04100B C1                  A   792    	POP	BC
                           A   793    ;   72	}
                           A   794    .LINE 72
                           A   795    
04100C DDF9                A   796    	LD	SP,IX
04100E DDE1                A   797    	POP	IX
041010 C9                  A   798    	RET	
                           A   799    
                           A   800    
                           A   801    ;**************************** _vdp_bgcolour ***
                           A   802    ;Name                         Addr/Register   S
                           A   803    ;b                                    IX+12    
                           A   804    ;g                                     IX+9    
                           A   805    ;r                                     IX+6    
                           A   806    
                           A   807    
                           A   808    ; Stack Frame Size: 15 (bytes)
                           A   809    ;       Spill Code: 0 (instruction)
                           A   810    
                           A   811    
                           A   812    .ENDFUNC "vdp_bgcolour",72,"_vdp_bgcolour"
                           A   813    ;   73	
                           A   814    ;   74	//
                           A   815    ;   75	// Graphics functions
                           A   816    ;   76	//
                           A   817    ;   77	
                           A   818    ;   78	void vdp_clearGraphics()
                           A   819    ;   79	{
041011                     A   820    _vdp_clearGraphics:
                           A   821    .DEFINE "_vdp_clearGraphics"
                           A   822    
                           A   823    .VALUE _vdp_clearGraphics
                           A   824    
                           A   825    .CLASS 2
                           A   826    
                           A   827    .TYPE 65
                           A   828    
                           A   829    .ENDEF
                           A   830    
                           A   831    .BEGFUNC "vdp_clearGraphics",79,"_vdp_clearGrap
                           A   832    
041011 DDE5                A   833    	PUSH	IX
041013 DD210000 00         A   834    	LD	IX,0
041018 DD39                A   835    	ADD	IX,SP
                           A   836    ;   80	    putch(16);    
                           A   837    .LINE 80
                           A   838    
04101A 01100000            A   839    	LD	BC,16
04101E C5                  A   840    	PUSH	BC
04101F CD 1F 19 04         A   841    	CALL	_putch
041023 C1                  A   842    	POP	BC
                           A   843    ;   81	}
                           A   844    .LINE 81
                           A   845    
041024 DDF9                A   846    	LD	SP,IX
041026 DDE1                A   847    	POP	IX
041028 C9                  A   848    	RET	
                           A   849    
                           A   850    
                           A   851    ;**************************** _vdp_clearGraphic
                           A   852    ;Name                         Addr/Register   S
                           A   853    ;_putch                              IMPORT  --
                           A   854    
                           A   855    
                           A   856    ; Stack Frame Size: 6 (bytes)
                           A   857    ;       Spill Code: 0 (instruction)
                           A   858    
                           A   859    
                           A   860    .ENDFUNC "vdp_clearGraphics",81,"_vdp_clearGrap
                           A   861    ;   82	
                           A   862    ;   83	void vdp_plotColour(unsigned char r, un
                           A   863    ;   84	{
041029                     A   864    _vdp_plotColour:
                           A   865    .DEFINE "_vdp_plotColour"
                           A   866    
                           A   867    .VALUE _vdp_plotColour
                           A   868    
                           A   869    .CLASS 2
                           A   870    
                           A   871    .TYPE 65
                           A   872    
                           A   873    .ENDEF
                           A   874    
                           A   875    .BEGFUNC "vdp_plotColour",84,"_vdp_plotColour"
                           A   876    
                           A   877    .LINE 84
                           A   878    
                           A   879    .DEFINE "r"
                           A   880    
                           A   881    .CLASS 65
                           A   882    
                           A   883    .VALUE 6
                           A   884    
                           A   885    .TYPE 12
                           A   886    
                           A   887    .ENDEF
                           A   888    
                           A   889    .DEFINE "g"
                           A   890    
                           A   891    .CLASS 65
                           A   892    
                           A   893    .VALUE 9
                           A   894    
                           A   895    .TYPE 12
                           A   896    
                           A   897    .ENDEF
                           A   898    
                           A   899    .DEFINE "b"
                           A   900    
                           A   901    .CLASS 65
                           A   902    
                           A   903    .VALUE 12
                           A   904    
                           A   905    .TYPE 12
                           A   906    
                           A   907    .ENDEF
                           A   908    
041029 DDE5                A   909    	PUSH	IX
04102B DD210000 00         A   910    	LD	IX,0
041030 DD39                A   911    	ADD	IX,SP
                           A   912    ;   85	    putch(18); // GCOL
                           A   913    .LINE 85
                           A   914    
041032 01120000            A   915    	LD	BC,18
041036 C5                  A   916    	PUSH	BC
041037 CD 1F 19 04         A   917    	CALL	_putch
04103B C1                  A   918    	POP	BC
                           A   919    ;   86	    putch(0);
                           A   920    .LINE 86
                           A   921    
04103C 01000000            A   922    	LD	BC,0
041040 C5                  A   923    	PUSH	BC
041041 CD 1F 19 04         A   924    	CALL	_putch
041045 C1                  A   925    	POP	BC
                           A   926    ;   87	    putch(r);
                           A   927    .LINE 87
                           A   928    
041046 DD7E06              A   929    	LD	A,(IX+%6)
041049 B7ED62              A   930    	UEXT	HL
04104C 6F                  A   931    	LD	L,A
04104D E5                  A   932    	PUSH	HL
04104E CD 1F 19 04         A   933    	CALL	_putch
041052 C1                  A   934    	POP	BC
                           A   935    ;   88	    putch(g);
                           A   936    .LINE 88
                           A   937    
041053 DD7E09              A   938    	LD	A,(IX+%9)
041056 B7ED62              A   939    	UEXT	HL
041059 6F                  A   940    	LD	L,A
04105A E5                  A   941    	PUSH	HL
04105B CD 1F 19 04         A   942    	CALL	_putch
04105F C1                  A   943    	POP	BC
                           A   944    ;   89	    putch(b);
                           A   945    .LINE 89
                           A   946    
041060 DD7E0C              A   947    	LD	A,(IX+%C)
041063 B7ED62              A   948    	UEXT	HL
041066 6F                  A   949    	LD	L,A
041067 E5                  A   950    	PUSH	HL
041068 CD 1F 19 04         A   951    	CALL	_putch
04106C C1                  A   952    	POP	BC
                           A   953    ;   90	}
                           A   954    .LINE 90
                           A   955    
04106D DDF9                A   956    	LD	SP,IX
04106F DDE1                A   957    	POP	IX
041071 C9                  A   958    	RET	
                           A   959    
                           A   960    
                           A   961    ;**************************** _vdp_plotColour *
                           A   962    ;Name                         Addr/Register   S
                           A   963    ;_putch                              IMPORT  --
                           A   964    ;b                                    IX+12    
                           A   965    ;g                                     IX+9    
                           A   966    ;r                                     IX+6    
                           A   967    
                           A   968    
                           A   969    ; Stack Frame Size: 15 (bytes)
                           A   970    ;       Spill Code: 0 (instruction)
                           A   971    
                           A   972    
                           A   973    .ENDFUNC "vdp_plotColour",90,"_vdp_plotColour"
                           A   974    ;   91	
                           A   975    ;   92	// internal function
                           A   976    ;   93	void vdp_plot(unsigned char mode, unsig
                           A   977    ;   94	{
041072                     A   978    _vdp_plot:
                           A   979    .DEFINE "_vdp_plot"
                           A   980    
                           A   981    .VALUE _vdp_plot
                           A   982    
                           A   983    .CLASS 2
                           A   984    
                           A   985    .TYPE 65
                           A   986    
                           A   987    .ENDEF
                           A   988    
                           A   989    .BEGFUNC "vdp_plot",94,"_vdp_plot"
                           A   990    
                           A   991    .LINE 94
                           A   992    
                           A   993    .DEFINE "mode"
                           A   994    
                           A   995    .CLASS 65
                           A   996    
                           A   997    .VALUE 6
                           A   998    
                           A   999    .TYPE 12
                           A  1000    
                           A  1001    .ENDEF
                           A  1002    
                           A  1003    .DEFINE "x"
                           A  1004    
                           A  1005    .CLASS 65
                           A  1006    
                           A  1007    .VALUE 9
                           A  1008    
                           A  1009    .TYPE 14
                           A  1010    
                           A  1011    .ENDEF
                           A  1012    
                           A  1013    .DEFINE "y"
                           A  1014    
                           A  1015    .CLASS 65
                           A  1016    
                           A  1017    .VALUE 12
                           A  1018    
                           A  1019    .TYPE 14
                           A  1020    
                           A  1021    .ENDEF
                           A  1022    
041072 DDE5                A  1023    	PUSH	IX
041074 DD210000 00         A  1024    	LD	IX,0
041079 DD39                A  1025    	ADD	IX,SP
                           A  1026    ;   95	    putch(25); // PLOT
                           A  1027    .LINE 95
                           A  1028    
04107B 01190000            A  1029    	LD	BC,25
04107F C5                  A  1030    	PUSH	BC
041080 CD 1F 19 04         A  1031    	CALL	_putch
041084 C1                  A  1032    	POP	BC
                           A  1033    ;   96	    putch(mode);
                           A  1034    .LINE 96
                           A  1035    
041085 DD7E06              A  1036    	LD	A,(IX+%6)
041088 B7ED62              A  1037    	UEXT	HL
04108B 6F                  A  1038    	LD	L,A
04108C E5                  A  1039    	PUSH	HL
04108D CD 1F 19 04         A  1040    	CALL	_putch
041091 C1                  A  1041    	POP	BC
                           A  1042    ;   97	    putch(x & 0xFF);
                           A  1043    .LINE 97
                           A  1044    
041092 DD7E09              A  1045    	LD	A,(IX+%9)
041095 B7ED62              A  1046    	UEXT	HL
041098 6F                  A  1047    	LD	L,A
041099 E5                  A  1048    	PUSH	HL
04109A CD 1F 19 04         A  1049    	CALL	_putch
04109E C1                  A  1050    	POP	BC
                           A  1051    ;   98	    putch(x >> 8);
                           A  1052    .LINE 98
                           A  1053    
04109F DD2709              A  1054    	LD	HL,(IX+%9)
0410A2 3E08                A  1055    	LD	A,%8
0410A4 CD C2 1B 04         A  1056    	CALL	__ishru_b
0410A8 E5                  A  1057    	PUSH	HL
0410A9 CD 1F 19 04         A  1058    	CALL	_putch
0410AD C1                  A  1059    	POP	BC
                           A  1060    ;   99	    putch(y & 0xFF);
                           A  1061    .LINE 99
                           A  1062    
0410AE DD7E0C              A  1063    	LD	A,(IX+%C)
0410B1 B7ED62              A  1064    	UEXT	HL
0410B4 6F                  A  1065    	LD	L,A
0410B5 E5                  A  1066    	PUSH	HL
0410B6 CD 1F 19 04         A  1067    	CALL	_putch
0410BA C1                  A  1068    	POP	BC
                           A  1069    ;  100	    putch(y >> 8);
                           A  1070    .LINE 100
                           A  1071    
0410BB DD270C              A  1072    	LD	HL,(IX+%C)
0410BE 3E08                A  1073    	LD	A,%8
0410C0 CD C2 1B 04         A  1074    	CALL	__ishru_b
0410C4 E5                  A  1075    	PUSH	HL
0410C5 CD 1F 19 04         A  1076    	CALL	_putch
0410C9 C1                  A  1077    	POP	BC
                           A  1078    ;  101	}
                           A  1079    .LINE 101
                           A  1080    
0410CA DDF9                A  1081    	LD	SP,IX
0410CC DDE1                A  1082    	POP	IX
0410CE C9                  A  1083    	RET	
                           A  1084    
                           A  1085    
                           A  1086    ;**************************** _vdp_plot *******
                           A  1087    ;Name                         Addr/Register   S
                           A  1088    ;_putch                              IMPORT  --
                           A  1089    ;y                                    IX+12    
                           A  1090    ;x                                     IX+9    
                           A  1091    ;mode                                  IX+6    
                           A  1092    
                           A  1093    
                           A  1094    ; Stack Frame Size: 15 (bytes)
                           A  1095    ;       Spill Code: 0 (instruction)
                           A  1096    
                           A  1097    
                           A  1098    .ENDFUNC "vdp_plot",101,"_vdp_plot"
                           A  1099    ;  102	
                           A  1100    ;  103	void vdp_plotMoveTo(unsigned int x, uns
                           A  1101    ;  104	{
0410CF                     A  1102    _vdp_plotMoveTo:
                           A  1103    .DEFINE "_vdp_plotMoveTo"
                           A  1104    
                           A  1105    .VALUE _vdp_plotMoveTo
                           A  1106    
                           A  1107    .CLASS 2
                           A  1108    
                           A  1109    .TYPE 65
                           A  1110    
                           A  1111    .ENDEF
                           A  1112    
                           A  1113    .BEGFUNC "vdp_plotMoveTo",104,"_vdp_plotMoveTo"
                           A  1114    
                           A  1115    .LINE 104
                           A  1116    
                           A  1117    .DEFINE "x"
                           A  1118    
                           A  1119    .CLASS 65
                           A  1120    
                           A  1121    .VALUE 6
                           A  1122    
                           A  1123    .TYPE 14
                           A  1124    
                           A  1125    .ENDEF
                           A  1126    
                           A  1127    .DEFINE "y"
                           A  1128    
                           A  1129    .CLASS 65
                           A  1130    
                           A  1131    .VALUE 9
                           A  1132    
                           A  1133    .TYPE 14
                           A  1134    
                           A  1135    .ENDEF
                           A  1136    
0410CF DDE5                A  1137    	PUSH	IX
0410D1 DD210000 00         A  1138    	LD	IX,0
0410D6 DD39                A  1139    	ADD	IX,SP
                           A  1140    ;  105		vdp_plot(0x04,x,y);
                           A  1141    .LINE 105
                           A  1142    
0410D8 DD0709              A  1143    	LD	BC,(IX+%9)
0410DB C5                  A  1144    	PUSH	BC
0410DC DD0706              A  1145    	LD	BC,(IX+%6)
0410DF C5                  A  1146    	PUSH	BC
0410E0 01040000            A  1147    	LD	BC,4
0410E4 C5                  A  1148    	PUSH	BC
0410E5 CD 72 10 04         A  1149    	CALL	_vdp_plot
0410E9 C1                  A  1150    	POP	BC
0410EA C1                  A  1151    	POP	BC
0410EB C1                  A  1152    	POP	BC
                           A  1153    ;  106	}
                           A  1154    .LINE 106
                           A  1155    
0410EC DDF9                A  1156    	LD	SP,IX
0410EE DDE1                A  1157    	POP	IX
0410F0 C9                  A  1158    	RET	
                           A  1159    
                           A  1160    
                           A  1161    ;**************************** _vdp_plotMoveTo *
                           A  1162    ;Name                         Addr/Register   S
                           A  1163    ;y                                     IX+9    
                           A  1164    ;x                                     IX+6    
                           A  1165    
                           A  1166    
                           A  1167    ; Stack Frame Size: 12 (bytes)
                           A  1168    ;       Spill Code: 0 (instruction)
                           A  1169    
                           A  1170    
                           A  1171    .ENDFUNC "vdp_plotMoveTo",106,"_vdp_plotMoveTo"
                           A  1172    ;  107	
                           A  1173    ;  108	void vdp_plotLineTo(unsigned int x, uns
                           A  1174    ;  109	{
0410F1                     A  1175    _vdp_plotLineTo:
                           A  1176    .DEFINE "_vdp_plotLineTo"
                           A  1177    
                           A  1178    .VALUE _vdp_plotLineTo
                           A  1179    
                           A  1180    .CLASS 2
                           A  1181    
                           A  1182    .TYPE 65
                           A  1183    
                           A  1184    .ENDEF
                           A  1185    
                           A  1186    .BEGFUNC "vdp_plotLineTo",109,"_vdp_plotLineTo"
                           A  1187    
                           A  1188    .LINE 109
                           A  1189    
                           A  1190    .DEFINE "x"
                           A  1191    
                           A  1192    .CLASS 65
                           A  1193    
                           A  1194    .VALUE 6
                           A  1195    
                           A  1196    .TYPE 14
                           A  1197    
                           A  1198    .ENDEF
                           A  1199    
                           A  1200    .DEFINE "y"
                           A  1201    
                           A  1202    .CLASS 65
                           A  1203    
                           A  1204    .VALUE 9
                           A  1205    
                           A  1206    .TYPE 14
                           A  1207    
                           A  1208    .ENDEF
                           A  1209    
0410F1 DDE5                A  1210    	PUSH	IX
0410F3 DD210000 00         A  1211    	LD	IX,0
0410F8 DD39                A  1212    	ADD	IX,SP
                           A  1213    ;  110		vdp_plot(0x05,x,y);
                           A  1214    .LINE 110
                           A  1215    
0410FA DD0709              A  1216    	LD	BC,(IX+%9)
0410FD C5                  A  1217    	PUSH	BC
0410FE DD0706              A  1218    	LD	BC,(IX+%6)
041101 C5                  A  1219    	PUSH	BC
041102 01050000            A  1220    	LD	BC,5
041106 C5                  A  1221    	PUSH	BC
041107 CD 72 10 04         A  1222    	CALL	_vdp_plot
04110B C1                  A  1223    	POP	BC
04110C C1                  A  1224    	POP	BC
04110D C1                  A  1225    	POP	BC
                           A  1226    ;  111	}
                           A  1227    .LINE 111
                           A  1228    
04110E DDF9                A  1229    	LD	SP,IX
041110 DDE1                A  1230    	POP	IX
041112 C9                  A  1231    	RET	
                           A  1232    
                           A  1233    
                           A  1234    ;**************************** _vdp_plotLineTo *
                           A  1235    ;Name                         Addr/Register   S
                           A  1236    ;y                                     IX+9    
                           A  1237    ;x                                     IX+6    
                           A  1238    
                           A  1239    
                           A  1240    ; Stack Frame Size: 12 (bytes)
                           A  1241    ;       Spill Code: 0 (instruction)
                           A  1242    
                           A  1243    
                           A  1244    .ENDFUNC "vdp_plotLineTo",111,"_vdp_plotLineTo"
                           A  1245    ;  112	
                           A  1246    ;  113	void vdp_plotPoint(unsigned int x, unsi
                           A  1247    ;  114	{
041113                     A  1248    _vdp_plotPoint:
                           A  1249    .DEFINE "_vdp_plotPoint"
                           A  1250    
                           A  1251    .VALUE _vdp_plotPoint
                           A  1252    
                           A  1253    .CLASS 2
                           A  1254    
                           A  1255    .TYPE 65
                           A  1256    
                           A  1257    .ENDEF
                           A  1258    
                           A  1259    .BEGFUNC "vdp_plotPoint",114,"_vdp_plotPoint"
                           A  1260    
                           A  1261    .LINE 114
                           A  1262    
                           A  1263    .DEFINE "x"
                           A  1264    
                           A  1265    .CLASS 65
                           A  1266    
                           A  1267    .VALUE 6
                           A  1268    
                           A  1269    .TYPE 14
                           A  1270    
                           A  1271    .ENDEF
                           A  1272    
                           A  1273    .DEFINE "y"
                           A  1274    
                           A  1275    .CLASS 65
                           A  1276    
                           A  1277    .VALUE 9
                           A  1278    
                           A  1279    .TYPE 14
                           A  1280    
                           A  1281    .ENDEF
                           A  1282    
041113 DDE5                A  1283    	PUSH	IX
041115 DD210000 00         A  1284    	LD	IX,0
04111A DD39                A  1285    	ADD	IX,SP
                           A  1286    ;  115		vdp_plot(0x40,x,y);
                           A  1287    .LINE 115
                           A  1288    
04111C DD0709              A  1289    	LD	BC,(IX+%9)
04111F C5                  A  1290    	PUSH	BC
041120 DD0706              A  1291    	LD	BC,(IX+%6)
041123 C5                  A  1292    	PUSH	BC
041124 01400000            A  1293    	LD	BC,64
041128 C5                  A  1294    	PUSH	BC
041129 CD 72 10 04         A  1295    	CALL	_vdp_plot
04112D C1                  A  1296    	POP	BC
04112E C1                  A  1297    	POP	BC
04112F C1                  A  1298    	POP	BC
                           A  1299    ;  116	}
                           A  1300    .LINE 116
                           A  1301    
041130 DDF9                A  1302    	LD	SP,IX
041132 DDE1                A  1303    	POP	IX
041134 C9                  A  1304    	RET	
                           A  1305    
                           A  1306    
                           A  1307    ;**************************** _vdp_plotPoint **
                           A  1308    ;Name                         Addr/Register   S
                           A  1309    ;y                                     IX+9    
                           A  1310    ;x                                     IX+6    
                           A  1311    
                           A  1312    
                           A  1313    ; Stack Frame Size: 12 (bytes)
                           A  1314    ;       Spill Code: 0 (instruction)
                           A  1315    
                           A  1316    
                           A  1317    .ENDFUNC "vdp_plotPoint",116,"_vdp_plotPoint"
                           A  1318    ;  117	
                           A  1319    ;  118	void vdp_plotTriangle(unsigned int x, u
                           A  1320    ;  119	{
041135                     A  1321    _vdp_plotTriangle:
                           A  1322    .DEFINE "_vdp_plotTriangle"
                           A  1323    
                           A  1324    .VALUE _vdp_plotTriangle
                           A  1325    
                           A  1326    .CLASS 2
                           A  1327    
                           A  1328    .TYPE 65
                           A  1329    
                           A  1330    .ENDEF
                           A  1331    
                           A  1332    .BEGFUNC "vdp_plotTriangle",119,"_vdp_plotTrian
                           A  1333    
                           A  1334    .LINE 119
                           A  1335    
                           A  1336    .DEFINE "x"
                           A  1337    
                           A  1338    .CLASS 65
                           A  1339    
                           A  1340    .VALUE 6
                           A  1341    
                           A  1342    .TYPE 14
                           A  1343    
                           A  1344    .ENDEF
                           A  1345    
                           A  1346    .DEFINE "y"
                           A  1347    
                           A  1348    .CLASS 65
                           A  1349    
                           A  1350    .VALUE 9
                           A  1351    
                           A  1352    .TYPE 14
                           A  1353    
                           A  1354    .ENDEF
                           A  1355    
041135 DDE5                A  1356    	PUSH	IX
041137 DD210000 00         A  1357    	LD	IX,0
04113C DD39                A  1358    	ADD	IX,SP
                           A  1359    ;  120		vdp_plot(0x50,x,y);
                           A  1360    .LINE 120
                           A  1361    
04113E DD0709              A  1362    	LD	BC,(IX+%9)
041141 C5                  A  1363    	PUSH	BC
041142 DD0706              A  1364    	LD	BC,(IX+%6)
041145 C5                  A  1365    	PUSH	BC
041146 01500000            A  1366    	LD	BC,80
04114A C5                  A  1367    	PUSH	BC
04114B CD 72 10 04         A  1368    	CALL	_vdp_plot
04114F C1                  A  1369    	POP	BC
041150 C1                  A  1370    	POP	BC
041151 C1                  A  1371    	POP	BC
                           A  1372    ;  121	}
                           A  1373    .LINE 121
                           A  1374    
041152 DDF9                A  1375    	LD	SP,IX
041154 DDE1                A  1376    	POP	IX
041156 C9                  A  1377    	RET	
                           A  1378    
                           A  1379    
                           A  1380    ;**************************** _vdp_plotTriangle
                           A  1381    ;Name                         Addr/Register   S
                           A  1382    ;y                                     IX+9    
                           A  1383    ;x                                     IX+6    
                           A  1384    
                           A  1385    
                           A  1386    ; Stack Frame Size: 12 (bytes)
                           A  1387    ;       Spill Code: 0 (instruction)
                           A  1388    
                           A  1389    
                           A  1390    .ENDFUNC "vdp_plotTriangle",121,"_vdp_plotTrian
                           A  1391    ;  122	
                           A  1392    ;  123	void vdp_plotCircleRadius(unsigned int 
                           A  1393    ;  124	{
041157                     A  1394    _vdp_plotCircleRadius:
                           A  1395    .DEFINE "_vdp_plotCircleRadius"
                           A  1396    
                           A  1397    .VALUE _vdp_plotCircleRadius
                           A  1398    
                           A  1399    .CLASS 2
                           A  1400    
                           A  1401    .TYPE 65
                           A  1402    
                           A  1403    .ENDEF
                           A  1404    
                           A  1405    .BEGFUNC "vdp_plotCircleRadius",124,"_vdp_plotC
                           A  1406    
                           A  1407    .LINE 124
                           A  1408    
                           A  1409    .DEFINE "r"
                           A  1410    
                           A  1411    .CLASS 65
                           A  1412    
                           A  1413    .VALUE 6
                           A  1414    
                           A  1415    .TYPE 14
                           A  1416    
                           A  1417    .ENDEF
                           A  1418    
041157 DDE5                A  1419    	PUSH	IX
041159 DD210000 00         A  1420    	LD	IX,0
04115E DD39                A  1421    	ADD	IX,SP
                           A  1422    ;  125		vdp_plot(0x90,r,0);
                           A  1423    .LINE 125
                           A  1424    
041160 01000000            A  1425    	LD	BC,0
041164 C5                  A  1426    	PUSH	BC
041165 DD0706              A  1427    	LD	BC,(IX+%6)
041168 C5                  A  1428    	PUSH	BC
041169 01900000            A  1429    	LD	BC,144
04116D C5                  A  1430    	PUSH	BC
04116E CD 72 10 04         A  1431    	CALL	_vdp_plot
041172 C1                  A  1432    	POP	BC
041173 C1                  A  1433    	POP	BC
041174 C1                  A  1434    	POP	BC
                           A  1435    ;  126	}
                           A  1436    .LINE 126
                           A  1437    
041175 DDF9                A  1438    	LD	SP,IX
041177 DDE1                A  1439    	POP	IX
041179 C9                  A  1440    	RET	
                           A  1441    
                           A  1442    
                           A  1443    ;**************************** _vdp_plotCircleRa
                           A  1444    ;Name                         Addr/Register   S
                           A  1445    ;r                                     IX+6    
                           A  1446    
                           A  1447    
                           A  1448    ; Stack Frame Size: 9 (bytes)
                           A  1449    ;       Spill Code: 0 (instruction)
                           A  1450    
                           A  1451    
                           A  1452    .ENDFUNC "vdp_plotCircleRadius",126,"_vdp_plotC
                           A  1453    ;  127	
                           A  1454    ;  128	void vdp_plotCircleCircumference(unsign
                           A  1455    ;  129	{
04117A                     A  1456    _vdp_plotCircleCircumference:
                           A  1457    .DEFINE "_vdp_plotCircleCircumference"
                           A  1458    
                           A  1459    .VALUE _vdp_plotCircleCircumference
                           A  1460    
                           A  1461    .CLASS 2
                           A  1462    
                           A  1463    .TYPE 65
                           A  1464    
                           A  1465    .ENDEF
                           A  1466    
                           A  1467    .BEGFUNC "vdp_plotCircleCircumference",129,"_vd
                           A  1468    
                           A  1469    .LINE 129
                           A  1470    
                           A  1471    .DEFINE "x"
                           A  1472    
                           A  1473    .CLASS 65
                           A  1474    
                           A  1475    .VALUE 6
                           A  1476    
                           A  1477    .TYPE 14
                           A  1478    
                           A  1479    .ENDEF
                           A  1480    
                           A  1481    .DEFINE "y"
                           A  1482    
                           A  1483    .CLASS 65
                           A  1484    
                           A  1485    .VALUE 9
                           A  1486    
                           A  1487    .TYPE 14
                           A  1488    
                           A  1489    .ENDEF
                           A  1490    
04117A DDE5                A  1491    	PUSH	IX
04117C DD210000 00         A  1492    	LD	IX,0
041181 DD39                A  1493    	ADD	IX,SP
                           A  1494    ;  130		vdp_plot(0x95,x,y);
                           A  1495    .LINE 130
                           A  1496    
041183 DD0709              A  1497    	LD	BC,(IX+%9)
041186 C5                  A  1498    	PUSH	BC
041187 DD0706              A  1499    	LD	BC,(IX+%6)
04118A C5                  A  1500    	PUSH	BC
04118B 01950000            A  1501    	LD	BC,149
04118F C5                  A  1502    	PUSH	BC
041190 CD 72 10 04         A  1503    	CALL	_vdp_plot
041194 C1                  A  1504    	POP	BC
041195 C1                  A  1505    	POP	BC
041196 C1                  A  1506    	POP	BC
                           A  1507    ;  131	}
                           A  1508    .LINE 131
                           A  1509    
041197 DDF9                A  1510    	LD	SP,IX
041199 DDE1                A  1511    	POP	IX
04119B C9                  A  1512    	RET	
                           A  1513    
                           A  1514    
                           A  1515    ;**************************** _vdp_plotCircleCi
                           A  1516    ;Name                         Addr/Register   S
                           A  1517    ;y                                     IX+9    
                           A  1518    ;x                                     IX+6    
                           A  1519    
                           A  1520    
                           A  1521    ; Stack Frame Size: 12 (bytes)
                           A  1522    ;       Spill Code: 0 (instruction)
                           A  1523    
                           A  1524    
                           A  1525    .ENDFUNC "vdp_plotCircleCircumference",131,"_vd
                           A  1526    ;  132	
                           A  1527    ;  133	void vdp_plotSetOrigin(unsigned int x, 
                           A  1528    ;  134	{
04119C                     A  1529    _vdp_plotSetOrigin:
                           A  1530    .DEFINE "_vdp_plotSetOrigin"
                           A  1531    
                           A  1532    .VALUE _vdp_plotSetOrigin
                           A  1533    
                           A  1534    .CLASS 2
                           A  1535    
                           A  1536    .TYPE 65
                           A  1537    
                           A  1538    .ENDEF
                           A  1539    
                           A  1540    .BEGFUNC "vdp_plotSetOrigin",134,"_vdp_plotSetO
                           A  1541    
                           A  1542    .LINE 134
                           A  1543    
                           A  1544    .DEFINE "x"
                           A  1545    
                           A  1546    .CLASS 65
                           A  1547    
                           A  1548    .VALUE 6
                           A  1549    
                           A  1550    .TYPE 14
                           A  1551    
                           A  1552    .ENDEF
                           A  1553    
                           A  1554    .DEFINE "y"
                           A  1555    
                           A  1556    .CLASS 65
                           A  1557    
                           A  1558    .VALUE 9
                           A  1559    
                           A  1560    .TYPE 14
                           A  1561    
                           A  1562    .ENDEF
                           A  1563    
04119C DDE5                A  1564    	PUSH	IX
04119E DD210000 00         A  1565    	LD	IX,0
0411A3 DD39                A  1566    	ADD	IX,SP
                           A  1567    ;  135	    putch(29); //Graphics ORIGIN
                           A  1568    .LINE 135
                           A  1569    
0411A5 011D0000            A  1570    	LD	BC,29
0411A9 C5                  A  1571    	PUSH	BC
0411AA CD 1F 19 04         A  1572    	CALL	_putch
0411AE C1                  A  1573    	POP	BC
                           A  1574    ;  136	    putch(x & 0xF);
                           A  1575    .LINE 136
                           A  1576    
0411AF DD7E06              A  1577    	LD	A,(IX+%6)
0411B2 E60F                A  1578    	AND	A,%F
0411B4 B7ED62              A  1579    	UEXT	HL
0411B7 6F                  A  1580    	LD	L,A
0411B8 E5                  A  1581    	PUSH	HL
0411B9 CD 1F 19 04         A  1582    	CALL	_putch
0411BD C1                  A  1583    	POP	BC
                           A  1584    ;  137	    putch(x >> 8);
                           A  1585    .LINE 137
                           A  1586    
0411BE DD2706              A  1587    	LD	HL,(IX+%6)
0411C1 3E08                A  1588    	LD	A,%8
0411C3 CD C2 1B 04         A  1589    	CALL	__ishru_b
0411C7 E5                  A  1590    	PUSH	HL
0411C8 CD 1F 19 04         A  1591    	CALL	_putch
0411CC C1                  A  1592    	POP	BC
                           A  1593    ;  138	    putch(y & 0xF);
                           A  1594    .LINE 138
                           A  1595    
0411CD DD7E09              A  1596    	LD	A,(IX+%9)
0411D0 E60F                A  1597    	AND	A,%F
0411D2 B7ED62              A  1598    	UEXT	HL
0411D5 6F                  A  1599    	LD	L,A
0411D6 E5                  A  1600    	PUSH	HL
0411D7 CD 1F 19 04         A  1601    	CALL	_putch
0411DB C1                  A  1602    	POP	BC
                           A  1603    ;  139	    putch(y >> 8);
                           A  1604    .LINE 139
                           A  1605    
0411DC DD2709              A  1606    	LD	HL,(IX+%9)
0411DF 3E08                A  1607    	LD	A,%8
0411E1 CD C2 1B 04         A  1608    	CALL	__ishru_b
0411E5 E5                  A  1609    	PUSH	HL
0411E6 CD 1F 19 04         A  1610    	CALL	_putch
0411EA C1                  A  1611    	POP	BC
                           A  1612    ;  140	}
                           A  1613    .LINE 140
                           A  1614    
0411EB DDF9                A  1615    	LD	SP,IX
0411ED DDE1                A  1616    	POP	IX
0411EF C9                  A  1617    	RET	
                           A  1618    
                           A  1619    
                           A  1620    ;**************************** _vdp_plotSetOrigi
                           A  1621    ;Name                         Addr/Register   S
                           A  1622    ;_putch                              IMPORT  --
                           A  1623    ;y                                     IX+9    
                           A  1624    ;x                                     IX+6    
                           A  1625    
                           A  1626    
                           A  1627    ; Stack Frame Size: 12 (bytes)
                           A  1628    ;       Spill Code: 0 (instruction)
                           A  1629    
                           A  1630    
                           A  1631    .ENDFUNC "vdp_plotSetOrigin",140,"_vdp_plotSetO
                           A  1632    ;  141	
                           A  1633    ;  142	// Bitmap VDP functions
                           A  1634    ;  143	void vdp_bitmapSelect(UINT8 id)
                           A  1635    ;  144	{
0411F0                     A  1636    _vdp_bitmapSelect:
                           A  1637    .DEFINE "_vdp_bitmapSelect"
                           A  1638    
                           A  1639    .VALUE _vdp_bitmapSelect
                           A  1640    
                           A  1641    .CLASS 2
                           A  1642    
                           A  1643    .TYPE 65
                           A  1644    
                           A  1645    .ENDEF
                           A  1646    
                           A  1647    .BEGFUNC "vdp_bitmapSelect",144,"_vdp_bitmapSel
                           A  1648    
                           A  1649    .LINE 144
                           A  1650    
                           A  1651    .DEFINE "id"
                           A  1652    
                           A  1653    .CLASS 65
                           A  1654    
                           A  1655    .VALUE 6
                           A  1656    
                           A  1657    .TYPE 12
                           A  1658    
                           A  1659    .ENDEF
                           A  1660    
0411F0 DDE5                A  1661    	PUSH	IX
0411F2 DD210000 00         A  1662    	LD	IX,0
0411F7 DD39                A  1663    	ADD	IX,SP
                           A  1664    ;  145		putch(23); // vdu_sys
                           A  1665    .LINE 145
                           A  1666    
0411F9 01170000            A  1667    	LD	BC,23
0411FD C5                  A  1668    	PUSH	BC
0411FE CD 1F 19 04         A  1669    	CALL	_putch
041202 C1                  A  1670    	POP	BC
                           A  1671    ;  146		putch(27); // sprite command
                           A  1672    .LINE 146
                           A  1673    
041203 011B0000            A  1674    	LD	BC,27
041207 C5                  A  1675    	PUSH	BC
041208 CD 1F 19 04         A  1676    	CALL	_putch
04120C C1                  A  1677    	POP	BC
                           A  1678    ;  147		putch(0);  // select command
                           A  1679    .LINE 147
                           A  1680    
04120D 01000000            A  1681    	LD	BC,0
041211 C5                  A  1682    	PUSH	BC
041212 CD 1F 19 04         A  1683    	CALL	_putch
041216 C1                  A  1684    	POP	BC
                           A  1685    ;  148		putch(id); // bitmap_id
                           A  1686    .LINE 148
                           A  1687    
041217 DD7E06              A  1688    	LD	A,(IX+%6)
04121A B7ED62              A  1689    	UEXT	HL
04121D 6F                  A  1690    	LD	L,A
04121E E5                  A  1691    	PUSH	HL
04121F CD 1F 19 04         A  1692    	CALL	_putch
041223 C1                  A  1693    	POP	BC
                           A  1694    ;  149		return;	
                           A  1695    ;  150	}
                           A  1696    .LINE 150
                           A  1697    
041224 DDF9                A  1698    	LD	SP,IX
041226 DDE1                A  1699    	POP	IX
041228 C9                  A  1700    	RET	
                           A  1701    
                           A  1702    
                           A  1703    ;**************************** _vdp_bitmapSelect
                           A  1704    ;Name                         Addr/Register   S
                           A  1705    ;_putch                              IMPORT  --
                           A  1706    ;id                                    IX+6    
                           A  1707    
                           A  1708    
                           A  1709    ; Stack Frame Size: 9 (bytes)
                           A  1710    ;       Spill Code: 0 (instruction)
                           A  1711    
                           A  1712    
                           A  1713    .ENDFUNC "vdp_bitmapSelect",150,"_vdp_bitmapSel
                           A  1714    ;  151	
                           A  1715    ;  152	void vdp_bitmapSendDataSelected(UINT16 
                           A  1716    ;  153	{
041229                     A  1717    _vdp_bitmapSendDataSelected:
                           A  1718    .DEFINE "_vdp_bitmapSendDataSelected"
                           A  1719    
                           A  1720    .VALUE _vdp_bitmapSendDataSelected
                           A  1721    
                           A  1722    .CLASS 2
                           A  1723    
                           A  1724    .TYPE 65
                           A  1725    
                           A  1726    .ENDEF
                           A  1727    
                           A  1728    .BEGFUNC "vdp_bitmapSendDataSelected",153,"_vdp
                           A  1729    
                           A  1730    .LINE 153
                           A  1731    
                           A  1732    .DEFINE "width"
                           A  1733    
                           A  1734    .CLASS 65
                           A  1735    
                           A  1736    .VALUE 6
                           A  1737    
                           A  1738    .TYPE 13
                           A  1739    
                           A  1740    .ENDEF
                           A  1741    
                           A  1742    .DEFINE "height"
                           A  1743    
                           A  1744    .CLASS 65
                           A  1745    
                           A  1746    .VALUE 9
                           A  1747    
                           A  1748    .TYPE 13
                           A  1749    
                           A  1750    .ENDEF
                           A  1751    
                           A  1752    .DEFINE "data"
                           A  1753    
                           A  1754    .CLASS 65
                           A  1755    
                           A  1756    .VALUE 12
                           A  1757    
                           A  1758    .TYPE 47
                           A  1759    
                           A  1760    .ENDEF
                           A  1761    
                           A  1762    .DEFINE "n"
                           A  1763    
                           A  1764    .CLASS 65
                           A  1765    
                           A  1766    .VALUE -2
                           A  1767    
                           A  1768    .TYPE 13
                           A  1769    
                           A  1770    .ENDEF
                           A  1771    
041229 DDE5                A  1772    	PUSH	IX
04122B DD210000 00         A  1773    	LD	IX,0
041230 DD39                A  1774    	ADD	IX,SP
041232 3B                  A  1775    	DEC	SP
041233 3B                  A  1776    	DEC	SP
                           A  1777    ;  154		UINT16 n;
                           A  1778    ;  155		
                           A  1779    ;  156		putch(23); // vdu_sys
                           A  1780    .LINE 156
                           A  1781    
041234 01170000            A  1782    	LD	BC,23
041238 C5                  A  1783    	PUSH	BC
041239 CD 1F 19 04         A  1784    	CALL	_putch
04123D C1                  A  1785    	POP	BC
                           A  1786    ;  157		putch(27); // sprite command
                           A  1787    .LINE 157
                           A  1788    
04123E 011B0000            A  1789    	LD	BC,27
041242 C5                  A  1790    	PUSH	BC
041243 CD 1F 19 04         A  1791    	CALL	_putch
041247 C1                  A  1792    	POP	BC
                           A  1793    ;  158		putch(1);  // send data to selected
                           A  1794    .LINE 158
                           A  1795    
041248 01010000            A  1796    	LD	BC,1
04124C C5                  A  1797    	PUSH	BC
04124D CD 1F 19 04         A  1798    	CALL	_putch
041251 C1                  A  1799    	POP	BC
                           A  1800    ;  159		
                           A  1801    ;  160		write16bit(width);
                           A  1802    .LINE 160
                           A  1803    
041252 DD0706              A  1804    	LD	BC,(IX+%6)
041255 C5                  A  1805    	PUSH	BC
041256 CD 13 0E 04         A  1806    	CALL	_write16bit
04125A C1                  A  1807    	POP	BC
                           A  1808    ;  161		write16bit(height);
                           A  1809    .LINE 161
                           A  1810    
04125B DD0709              A  1811    	LD	BC,(IX+%9)
04125E C5                  A  1812    	PUSH	BC
04125F CD 13 0E 04         A  1813    	CALL	_write16bit
041263 C1                  A  1814    	POP	BC
                           A  1815    ;  162		
                           A  1816    ;  163		for(n = 0; n < (width*height); n++)
                           A  1817    .LINE 163
                           A  1818    
041264 DD36FE00            A  1819    	LD	(IX+%FFFFFFFE),%0
041268 DD36FF00            A  1820    	LD	(IX+%FFFFFFFF),%0
04126C 18 2B               A  1821    	JR	L_28
04126E                     A  1822    L_26:
                           A  1823    ;  164		{
                           A  1824    ;  165			write32bit(data[n]);
                           A  1825    .LINE 165
                           A  1826    
04126E DD07FE              A  1827    	LD	BC,(IX+%FFFFFFFE)
041271 CD F1 1A 04         A  1828    	CALL	__stoiu
041275 29                  A  1829    	ADD	HL,HL
041276 29                  A  1830    	ADD	HL,HL
041277 DD070C              A  1831    	LD	BC,(IX+%C)
04127A 09                  A  1832    	ADD	HL,BC
04127B E5FDE1              A  1833    	LD	IY,HL
04127E FD0700              A  1834    	LD	BC,(IY)
041281 FD7E03              A  1835    	LD	A,(IY+%3)
041284 2600                A  1836    	LD	H,%0
041286 6F                  A  1837    	LD	L,A
041287 E5                  A  1838    	PUSH	HL
041288 C5                  A  1839    	PUSH	BC
041289 CD 46 0E 04         A  1840    	CALL	_write32bit
04128D C1                  A  1841    	POP	BC
04128E C1                  A  1842    	POP	BC
04128F DD27FE              A  1843    	LD	HL,(IX+%FFFFFFFE)
041292 23                  A  1844    	INC	HL
041293 DD75FE              A  1845    	LD	(IX+%FFFFFFFE),L
041296 DD74FF              A  1846    	LD	(IX+%FFFFFFFF),H
                           A  1847    ;  166			//delayms(1);
                           A  1848    ;  167		}
041299                     A  1849    L_28:
                           A  1850    .LINE 167
                           A  1851    
041299 DD0706              A  1852    	LD	BC,(IX+%6)
04129C CD F1 1A 04         A  1853    	CALL	__stoiu
0412A0 E5D1                A  1854    	LD	DE,HL
0412A2 DD0709              A  1855    	LD	BC,(IX+%9)
0412A5 CD F1 1A 04         A  1856    	CALL	__stoiu
0412A9 E5C1                A  1857    	LD	BC,HL
0412AB D5E1                A  1858    	LD	HL,DE
0412AD CD 86 1B 04         A  1859    	CALL	__imuls
0412B1 E5D1                A  1860    	LD	DE,HL
0412B3 DD07FE              A  1861    	LD	BC,(IX+%FFFFFFFE)
0412B6 CD F1 1A 04         A  1862    	CALL	__stoiu
0412BA B7                  A  1863    	OR	A,A
0412BB ED52                A  1864    	SBC	HL,DE
0412BD FA 6E 12 04         A  1865    	JP	M,L_26
                           A  1866    ;  168		return;		
                           A  1867    ;  169	}
                           A  1868    .LINE 169
                           A  1869    
0412C1 DDF9                A  1870    	LD	SP,IX
0412C3 DDE1                A  1871    	POP	IX
0412C5 C9                  A  1872    	RET	
                           A  1873    
                           A  1874    
                           A  1875    ;**************************** _vdp_bitmapSendDa
                           A  1876    ;Name                         Addr/Register   S
                           A  1877    ;_putch                              IMPORT  --
                           A  1878    ;n                                     IX-2    
                           A  1879    ;data                                 IX+12    
                           A  1880    ;height                                IX+9    
                           A  1881    ;width                                 IX+6    
                           A  1882    
                           A  1883    
                           A  1884    ; Stack Frame Size: 17 (bytes)
                           A  1885    ;       Spill Code: 0 (instruction)
                           A  1886    
                           A  1887    
                           A  1888    .ENDFUNC "vdp_bitmapSendDataSelected",169,"_vdp
                           A  1889    ;  170	
                           A  1890    ;  171	void vdp_bitmapSendData(UINT8 id, UINT1
                           A  1891    ;  172	{
0412C6                     A  1892    _vdp_bitmapSendData:
                           A  1893    .DEFINE "_vdp_bitmapSendData"
                           A  1894    
                           A  1895    .VALUE _vdp_bitmapSendData
                           A  1896    
                           A  1897    .CLASS 2
                           A  1898    
                           A  1899    .TYPE 65
                           A  1900    
                           A  1901    .ENDEF
                           A  1902    
                           A  1903    .BEGFUNC "vdp_bitmapSendData",172,"_vdp_bitmapS
                           A  1904    
                           A  1905    .LINE 172
                           A  1906    
                           A  1907    .DEFINE "id"
                           A  1908    
                           A  1909    .CLASS 65
                           A  1910    
                           A  1911    .VALUE 6
                           A  1912    
                           A  1913    .TYPE 12
                           A  1914    
                           A  1915    .ENDEF
                           A  1916    
                           A  1917    .DEFINE "width"
                           A  1918    
                           A  1919    .CLASS 65
                           A  1920    
                           A  1921    .VALUE 9
                           A  1922    
                           A  1923    .TYPE 13
                           A  1924    
                           A  1925    .ENDEF
                           A  1926    
                           A  1927    .DEFINE "height"
                           A  1928    
                           A  1929    .CLASS 65
                           A  1930    
                           A  1931    .VALUE 12
                           A  1932    
                           A  1933    .TYPE 13
                           A  1934    
                           A  1935    .ENDEF
                           A  1936    
                           A  1937    .DEFINE "data"
                           A  1938    
                           A  1939    .CLASS 65
                           A  1940    
                           A  1941    .VALUE 15
                           A  1942    
                           A  1943    .TYPE 47
                           A  1944    
                           A  1945    .ENDEF
                           A  1946    
0412C6 DDE5                A  1947    	PUSH	IX
0412C8 DD210000 00         A  1948    	LD	IX,0
0412CD DD39                A  1949    	ADD	IX,SP
                           A  1950    ;  173		vdp_bitmapSelect(id);
                           A  1951    .LINE 173
                           A  1952    
0412CF DD4E06              A  1953    	LD	C,(IX+%6)
0412D2 0600                A  1954    	LD	B,%0
0412D4 C5                  A  1955    	PUSH	BC
0412D5 CD F0 11 04         A  1956    	CALL	_vdp_bitmapSelect
0412D9 C1                  A  1957    	POP	BC
                           A  1958    ;  174		vdp_bitmapSendDataSelected(width, h
                           A  1959    .LINE 174
                           A  1960    
0412DA DD070F              A  1961    	LD	BC,(IX+%F)
0412DD C5                  A  1962    	PUSH	BC
0412DE DD070C              A  1963    	LD	BC,(IX+%C)
0412E1 C5                  A  1964    	PUSH	BC
0412E2 DD0709              A  1965    	LD	BC,(IX+%9)
0412E5 C5                  A  1966    	PUSH	BC
0412E6 CD 29 12 04         A  1967    	CALL	_vdp_bitmapSendDataSelected
0412EA C1                  A  1968    	POP	BC
0412EB C1                  A  1969    	POP	BC
0412EC C1                  A  1970    	POP	BC
                           A  1971    ;  175		return;	
                           A  1972    ;  176	}
                           A  1973    .LINE 176
                           A  1974    
0412ED DDF9                A  1975    	LD	SP,IX
0412EF DDE1                A  1976    	POP	IX
0412F1 C9                  A  1977    	RET	
                           A  1978    
                           A  1979    
                           A  1980    ;**************************** _vdp_bitmapSendDa
                           A  1981    ;Name                         Addr/Register   S
                           A  1982    ;data                                 IX+15    
                           A  1983    ;height                               IX+12    
                           A  1984    ;width                                 IX+9    
                           A  1985    ;id                                    IX+6    
                           A  1986    
                           A  1987    
                           A  1988    ; Stack Frame Size: 18 (bytes)
                           A  1989    ;       Spill Code: 0 (instruction)
                           A  1990    
                           A  1991    
                           A  1992    .ENDFUNC "vdp_bitmapSendData",176,"_vdp_bitmapS
                           A  1993    ;  177	
                           A  1994    ;  178	void vdp_bitmapDrawSelected(UINT16 x, U
                           A  1995    ;  179	{
0412F2                     A  1996    _vdp_bitmapDrawSelected:
                           A  1997    .DEFINE "_vdp_bitmapDrawSelected"
                           A  1998    
                           A  1999    .VALUE _vdp_bitmapDrawSelected
                           A  2000    
                           A  2001    .CLASS 2
                           A  2002    
                           A  2003    .TYPE 65
                           A  2004    
                           A  2005    .ENDEF
                           A  2006    
                           A  2007    .BEGFUNC "vdp_bitmapDrawSelected",179,"_vdp_bit
                           A  2008    
                           A  2009    .LINE 179
                           A  2010    
                           A  2011    .DEFINE "x"
                           A  2012    
                           A  2013    .CLASS 65
                           A  2014    
                           A  2015    .VALUE 6
                           A  2016    
                           A  2017    .TYPE 13
                           A  2018    
                           A  2019    .ENDEF
                           A  2020    
                           A  2021    .DEFINE "y"
                           A  2022    
                           A  2023    .CLASS 65
                           A  2024    
                           A  2025    .VALUE 9
                           A  2026    
                           A  2027    .TYPE 13
                           A  2028    
                           A  2029    .ENDEF
                           A  2030    
0412F2 DDE5                A  2031    	PUSH	IX
0412F4 DD210000 00         A  2032    	LD	IX,0
0412F9 DD39                A  2033    	ADD	IX,SP
                           A  2034    ;  180		putch(23); // vdu_sys
                           A  2035    .LINE 180
                           A  2036    
0412FB 01170000            A  2037    	LD	BC,23
0412FF C5                  A  2038    	PUSH	BC
041300 CD 1F 19 04         A  2039    	CALL	_putch
041304 C1                  A  2040    	POP	BC
                           A  2041    ;  181		putch(27); // sprite command
                           A  2042    .LINE 181
                           A  2043    
041305 011B0000            A  2044    	LD	BC,27
041309 C5                  A  2045    	PUSH	BC
04130A CD 1F 19 04         A  2046    	CALL	_putch
04130E C1                  A  2047    	POP	BC
                           A  2048    ;  182		putch(3);  // draw selected bitmap
                           A  2049    .LINE 182
                           A  2050    
04130F 01030000            A  2051    	LD	BC,3
041313 C5                  A  2052    	PUSH	BC
041314 CD 1F 19 04         A  2053    	CALL	_putch
041318 C1                  A  2054    	POP	BC
                           A  2055    ;  183		
                           A  2056    ;  184		write16bit(x);
                           A  2057    .LINE 184
                           A  2058    
041319 DD0706              A  2059    	LD	BC,(IX+%6)
04131C C5                  A  2060    	PUSH	BC
04131D CD 13 0E 04         A  2061    	CALL	_write16bit
041321 C1                  A  2062    	POP	BC
                           A  2063    ;  185		write16bit(y);
                           A  2064    .LINE 185
                           A  2065    
041322 DD0709              A  2066    	LD	BC,(IX+%9)
041325 C5                  A  2067    	PUSH	BC
041326 CD 13 0E 04         A  2068    	CALL	_write16bit
04132A C1                  A  2069    	POP	BC
                           A  2070    ;  186		
                           A  2071    ;  187		return;
                           A  2072    ;  188	}
                           A  2073    .LINE 188
                           A  2074    
04132B DDF9                A  2075    	LD	SP,IX
04132D DDE1                A  2076    	POP	IX
04132F C9                  A  2077    	RET	
                           A  2078    
                           A  2079    
                           A  2080    ;**************************** _vdp_bitmapDrawSe
                           A  2081    ;Name                         Addr/Register   S
                           A  2082    ;_putch                              IMPORT  --
                           A  2083    ;y                                     IX+9    
                           A  2084    ;x                                     IX+6    
                           A  2085    
                           A  2086    
                           A  2087    ; Stack Frame Size: 12 (bytes)
                           A  2088    ;       Spill Code: 0 (instruction)
                           A  2089    
                           A  2090    
                           A  2091    .ENDFUNC "vdp_bitmapDrawSelected",188,"_vdp_bit
                           A  2092    ;  189	
                           A  2093    ;  190	void vdp_bitmapDraw(UINT8 id, UINT16 x,
                           A  2094    ;  191	{
041330                     A  2095    _vdp_bitmapDraw:
                           A  2096    .DEFINE "_vdp_bitmapDraw"
                           A  2097    
                           A  2098    .VALUE _vdp_bitmapDraw
                           A  2099    
                           A  2100    .CLASS 2
                           A  2101    
                           A  2102    .TYPE 65
                           A  2103    
                           A  2104    .ENDEF
                           A  2105    
                           A  2106    .BEGFUNC "vdp_bitmapDraw",191,"_vdp_bitmapDraw"
                           A  2107    
                           A  2108    .LINE 191
                           A  2109    
                           A  2110    .DEFINE "id"
                           A  2111    
                           A  2112    .CLASS 65
                           A  2113    
                           A  2114    .VALUE 6
                           A  2115    
                           A  2116    .TYPE 12
                           A  2117    
                           A  2118    .ENDEF
                           A  2119    
                           A  2120    .DEFINE "x"
                           A  2121    
                           A  2122    .CLASS 65
                           A  2123    
                           A  2124    .VALUE 9
                           A  2125    
                           A  2126    .TYPE 13
                           A  2127    
                           A  2128    .ENDEF
                           A  2129    
                           A  2130    .DEFINE "y"
                           A  2131    
                           A  2132    .CLASS 65
                           A  2133    
                           A  2134    .VALUE 12
                           A  2135    
                           A  2136    .TYPE 13
                           A  2137    
                           A  2138    .ENDEF
                           A  2139    
041330 DDE5                A  2140    	PUSH	IX
041332 DD210000 00         A  2141    	LD	IX,0
041337 DD39                A  2142    	ADD	IX,SP
                           A  2143    ;  192		vdp_bitmapSelect(id);
                           A  2144    .LINE 192
                           A  2145    
041339 DD4E06              A  2146    	LD	C,(IX+%6)
04133C 0600                A  2147    	LD	B,%0
04133E C5                  A  2148    	PUSH	BC
04133F CD F0 11 04         A  2149    	CALL	_vdp_bitmapSelect
041343 C1                  A  2150    	POP	BC
                           A  2151    ;  193		vdp_bitmapDrawSelected(x,y);
                           A  2152    .LINE 193
                           A  2153    
041344 DD070C              A  2154    	LD	BC,(IX+%C)
041347 C5                  A  2155    	PUSH	BC
041348 DD0709              A  2156    	LD	BC,(IX+%9)
04134B C5                  A  2157    	PUSH	BC
04134C CD F2 12 04         A  2158    	CALL	_vdp_bitmapDrawSelected
041350 C1                  A  2159    	POP	BC
041351 C1                  A  2160    	POP	BC
                           A  2161    ;  194		return;	
                           A  2162    ;  195	}
                           A  2163    .LINE 195
                           A  2164    
041352 DDF9                A  2165    	LD	SP,IX
041354 DDE1                A  2166    	POP	IX
041356 C9                  A  2167    	RET	
                           A  2168    
                           A  2169    
                           A  2170    ;**************************** _vdp_bitmapDraw *
                           A  2171    ;Name                         Addr/Register   S
                           A  2172    ;y                                    IX+12    
                           A  2173    ;x                                     IX+9    
                           A  2174    ;id                                    IX+6    
                           A  2175    
                           A  2176    
                           A  2177    ; Stack Frame Size: 15 (bytes)
                           A  2178    ;       Spill Code: 0 (instruction)
                           A  2179    
                           A  2180    
                           A  2181    .ENDFUNC "vdp_bitmapDraw",195,"_vdp_bitmapDraw"
                           A  2182    ;  196	
                           A  2183    ;  197	void vdp_bitmapCreateSolidColorSelected
                           A  2184    ;  198	{
041357                     A  2185    _vdp_bitmapCreateSolidColorSelected:
                           A  2186    .DEFINE "_vdp_bitmapCreateSolidColorSelected"
                           A  2187    
                           A  2188    .VALUE _vdp_bitmapCreateSolidColorSelected
                           A  2189    
                           A  2190    .CLASS 2
                           A  2191    
                           A  2192    .TYPE 65
                           A  2193    
                           A  2194    .ENDEF
                           A  2195    
                           A  2196    .BEGFUNC "vdp_bitmapCreateSolidColorSelected",1
                           A  2197    
                           A  2198    .LINE 198
                           A  2199    
                           A  2200    .DEFINE "width"
                           A  2201    
                           A  2202    .CLASS 65
                           A  2203    
                           A  2204    .VALUE 6
                           A  2205    
                           A  2206    .TYPE 13
                           A  2207    
                           A  2208    .ENDEF
                           A  2209    
                           A  2210    .DEFINE "height"
                           A  2211    
                           A  2212    .CLASS 65
                           A  2213    
                           A  2214    .VALUE 9
                           A  2215    
                           A  2216    .TYPE 13
                           A  2217    
                           A  2218    .ENDEF
                           A  2219    
                           A  2220    .DEFINE "abgr"
                           A  2221    
                           A  2222    .CLASS 65
                           A  2223    
                           A  2224    .VALUE 12
                           A  2225    
                           A  2226    .TYPE 15
                           A  2227    
                           A  2228    .ENDEF
                           A  2229    
041357 DDE5                A  2230    	PUSH	IX
041359 DD210000 00         A  2231    	LD	IX,0
04135E DD39                A  2232    	ADD	IX,SP
                           A  2233    ;  199		putch(23); // vdu_sys
                           A  2234    .LINE 199
                           A  2235    
041360 01170000            A  2236    	LD	BC,23
041364 C5                  A  2237    	PUSH	BC
041365 CD 1F 19 04         A  2238    	CALL	_putch
041369 C1                  A  2239    	POP	BC
                           A  2240    ;  200		putch(27); // sprite command
                           A  2241    .LINE 200
                           A  2242    
04136A 011B0000            A  2243    	LD	BC,27
04136E C5                  A  2244    	PUSH	BC
04136F CD 1F 19 04         A  2245    	CALL	_putch
041373 C1                  A  2246    	POP	BC
                           A  2247    ;  201		putch(2);  // define in single colo
                           A  2248    .LINE 201
                           A  2249    
041374 01020000            A  2250    	LD	BC,2
041378 C5                  A  2251    	PUSH	BC
041379 CD 1F 19 04         A  2252    	CALL	_putch
04137D C1                  A  2253    	POP	BC
                           A  2254    ;  202		
                           A  2255    ;  203		write16bit(width);
                           A  2256    .LINE 203
                           A  2257    
04137E DD0706              A  2258    	LD	BC,(IX+%6)
041381 C5                  A  2259    	PUSH	BC
041382 CD 13 0E 04         A  2260    	CALL	_write16bit
041386 C1                  A  2261    	POP	BC
                           A  2262    ;  204		write16bit(height);
                           A  2263    .LINE 204
                           A  2264    
041387 DD0709              A  2265    	LD	BC,(IX+%9)
04138A C5                  A  2266    	PUSH	BC
04138B CD 13 0E 04         A  2267    	CALL	_write16bit
04138F C1                  A  2268    	POP	BC
                           A  2269    ;  205		write32bit(abgr);
                           A  2270    .LINE 205
                           A  2271    
041390 DD4E0F              A  2272    	LD	C,(IX+%F)
041393 0600                A  2273    	LD	B,%0
041395 C5                  A  2274    	PUSH	BC
041396 DD070C              A  2275    	LD	BC,(IX+%C)
041399 C5                  A  2276    	PUSH	BC
04139A CD 46 0E 04         A  2277    	CALL	_write32bit
04139E C1                  A  2278    	POP	BC
04139F C1                  A  2279    	POP	BC
                           A  2280    ;  206		return;		
                           A  2281    ;  207	}
                           A  2282    .LINE 207
                           A  2283    
0413A0 DDF9                A  2284    	LD	SP,IX
0413A2 DDE1                A  2285    	POP	IX
0413A4 C9                  A  2286    	RET	
                           A  2287    
                           A  2288    
                           A  2289    ;**************************** _vdp_bitmapCreate
                           A  2290    ;Name                         Addr/Register   S
                           A  2291    ;_putch                              IMPORT  --
                           A  2292    ;abgr                                 IX+12    
                           A  2293    ;height                                IX+9    
                           A  2294    ;width                                 IX+6    
                           A  2295    
                           A  2296    
                           A  2297    ; Stack Frame Size: 18 (bytes)
                           A  2298    ;       Spill Code: 0 (instruction)
                           A  2299    
                           A  2300    
                           A  2301    .ENDFUNC "vdp_bitmapCreateSolidColorSelected",2
                           A  2302    ;  208	
                           A  2303    ;  209	void vdp_bitmapCreateSolidColor(UINT8 i
                           A  2304    ;  210	{
0413A5                     A  2305    _vdp_bitmapCreateSolidColor:
                           A  2306    .DEFINE "_vdp_bitmapCreateSolidColor"
                           A  2307    
                           A  2308    .VALUE _vdp_bitmapCreateSolidColor
                           A  2309    
                           A  2310    .CLASS 2
                           A  2311    
                           A  2312    .TYPE 65
                           A  2313    
                           A  2314    .ENDEF
                           A  2315    
                           A  2316    .BEGFUNC "vdp_bitmapCreateSolidColor",210,"_vdp
                           A  2317    
                           A  2318    .LINE 210
                           A  2319    
                           A  2320    .DEFINE "id"
                           A  2321    
                           A  2322    .CLASS 65
                           A  2323    
                           A  2324    .VALUE 6
                           A  2325    
                           A  2326    .TYPE 12
                           A  2327    
                           A  2328    .ENDEF
                           A  2329    
                           A  2330    .DEFINE "width"
                           A  2331    
                           A  2332    .CLASS 65
                           A  2333    
                           A  2334    .VALUE 9
                           A  2335    
                           A  2336    .TYPE 13
                           A  2337    
                           A  2338    .ENDEF
                           A  2339    
                           A  2340    .DEFINE "height"
                           A  2341    
                           A  2342    .CLASS 65
                           A  2343    
                           A  2344    .VALUE 12
                           A  2345    
                           A  2346    .TYPE 13
                           A  2347    
                           A  2348    .ENDEF
                           A  2349    
                           A  2350    .DEFINE "abgr"
                           A  2351    
                           A  2352    .CLASS 65
                           A  2353    
                           A  2354    .VALUE 15
                           A  2355    
                           A  2356    .TYPE 15
                           A  2357    
                           A  2358    .ENDEF
                           A  2359    
0413A5 DDE5                A  2360    	PUSH	IX
0413A7 DD210000 00         A  2361    	LD	IX,0
0413AC DD39                A  2362    	ADD	IX,SP
                           A  2363    ;  211		vdp_bitmapSelect(id);
                           A  2364    .LINE 211
                           A  2365    
0413AE DD4E06              A  2366    	LD	C,(IX+%6)
0413B1 0600                A  2367    	LD	B,%0
0413B3 C5                  A  2368    	PUSH	BC
0413B4 CD F0 11 04         A  2369    	CALL	_vdp_bitmapSelect
0413B8 C1                  A  2370    	POP	BC
                           A  2371    ;  212		vdp_bitmapCreateSolidColorSelected(
                           A  2372    .LINE 212
                           A  2373    
0413B9 DD4E12              A  2374    	LD	C,(IX+%12)
0413BC 0600                A  2375    	LD	B,%0
0413BE C5                  A  2376    	PUSH	BC
0413BF DD070F              A  2377    	LD	BC,(IX+%F)
0413C2 C5                  A  2378    	PUSH	BC
0413C3 DD070C              A  2379    	LD	BC,(IX+%C)
0413C6 C5                  A  2380    	PUSH	BC
0413C7 DD0709              A  2381    	LD	BC,(IX+%9)
0413CA C5                  A  2382    	PUSH	BC
0413CB CD 57 13 04         A  2383    	CALL	_vdp_bitmapCreateSolidColorSelected
0413CF C1                  A  2384    	POP	BC
0413D0 C1                  A  2385    	POP	BC
0413D1 C1                  A  2386    	POP	BC
0413D2 C1                  A  2387    	POP	BC
                           A  2388    ;  213		return;	
                           A  2389    ;  214	}
                           A  2390    .LINE 214
                           A  2391    
0413D3 DDF9                A  2392    	LD	SP,IX
0413D5 DDE1                A  2393    	POP	IX
0413D7 C9                  A  2394    	RET	
                           A  2395    
                           A  2396    
                           A  2397    ;**************************** _vdp_bitmapCreate
                           A  2398    ;Name                         Addr/Register   S
                           A  2399    ;abgr                                 IX+15    
                           A  2400    ;height                               IX+12    
                           A  2401    ;width                                 IX+9    
                           A  2402    ;id                                    IX+6    
                           A  2403    
                           A  2404    
                           A  2405    ; Stack Frame Size: 21 (bytes)
                           A  2406    ;       Spill Code: 0 (instruction)
                           A  2407    
                           A  2408    
                           A  2409    .ENDFUNC "vdp_bitmapCreateSolidColor",214,"_vdp
                           A  2410    ;  215	
                           A  2411    ;  216	// Sprite VDP functions
                           A  2412    ;  217	void vdp_spriteSelect(UINT8 id)
                           A  2413    ;  218	{
0413D8                     A  2414    _vdp_spriteSelect:
                           A  2415    .DEFINE "_vdp_spriteSelect"
                           A  2416    
                           A  2417    .VALUE _vdp_spriteSelect
                           A  2418    
                           A  2419    .CLASS 2
                           A  2420    
                           A  2421    .TYPE 65
                           A  2422    
                           A  2423    .ENDEF
                           A  2424    
                           A  2425    .BEGFUNC "vdp_spriteSelect",218,"_vdp_spriteSel
                           A  2426    
                           A  2427    .LINE 218
                           A  2428    
                           A  2429    .DEFINE "id"
                           A  2430    
                           A  2431    .CLASS 65
                           A  2432    
                           A  2433    .VALUE 6
                           A  2434    
                           A  2435    .TYPE 12
                           A  2436    
                           A  2437    .ENDEF
                           A  2438    
0413D8 DDE5                A  2439    	PUSH	IX
0413DA DD210000 00         A  2440    	LD	IX,0
0413DF DD39                A  2441    	ADD	IX,SP
                           A  2442    ;  219		putch(23); // vdu_sys
                           A  2443    .LINE 219
                           A  2444    
0413E1 01170000            A  2445    	LD	BC,23
0413E5 C5                  A  2446    	PUSH	BC
0413E6 CD 1F 19 04         A  2447    	CALL	_putch
0413EA C1                  A  2448    	POP	BC
                           A  2449    ;  220		putch(27); // sprite command
                           A  2450    .LINE 220
                           A  2451    
0413EB 011B0000            A  2452    	LD	BC,27
0413EF C5                  A  2453    	PUSH	BC
0413F0 CD 1F 19 04         A  2454    	CALL	_putch
0413F4 C1                  A  2455    	POP	BC
                           A  2456    ;  221		putch(4);  // select sprite
                           A  2457    .LINE 221
                           A  2458    
0413F5 01040000            A  2459    	LD	BC,4
0413F9 C5                  A  2460    	PUSH	BC
0413FA CD 1F 19 04         A  2461    	CALL	_putch
0413FE C1                  A  2462    	POP	BC
                           A  2463    ;  222		putch(id);
                           A  2464    .LINE 222
                           A  2465    
0413FF DD7E06              A  2466    	LD	A,(IX+%6)
041402 B7ED62              A  2467    	UEXT	HL
041405 6F                  A  2468    	LD	L,A
041406 E5                  A  2469    	PUSH	HL
041407 CD 1F 19 04         A  2470    	CALL	_putch
04140B C1                  A  2471    	POP	BC
                           A  2472    ;  223		return;			
                           A  2473    ;  224	}
                           A  2474    .LINE 224
                           A  2475    
04140C DDF9                A  2476    	LD	SP,IX
04140E DDE1                A  2477    	POP	IX
041410 C9                  A  2478    	RET	
                           A  2479    
                           A  2480    
                           A  2481    ;**************************** _vdp_spriteSelect
                           A  2482    ;Name                         Addr/Register   S
                           A  2483    ;_putch                              IMPORT  --
                           A  2484    ;id                                    IX+6    
                           A  2485    
                           A  2486    
                           A  2487    ; Stack Frame Size: 9 (bytes)
                           A  2488    ;       Spill Code: 0 (instruction)
                           A  2489    
                           A  2490    
                           A  2491    .ENDFUNC "vdp_spriteSelect",224,"_vdp_spriteSel
                           A  2492    ;  225	
                           A  2493    ;  226	void vdp_spriteClearFramesSelected(void
                           A  2494    ;  227	{
041411                     A  2495    _vdp_spriteClearFramesSelected:
                           A  2496    .DEFINE "_vdp_spriteClearFramesSelected"
                           A  2497    
                           A  2498    .VALUE _vdp_spriteClearFramesSelected
                           A  2499    
                           A  2500    .CLASS 2
                           A  2501    
                           A  2502    .TYPE 65
                           A  2503    
                           A  2504    .ENDEF
                           A  2505    
                           A  2506    .BEGFUNC "vdp_spriteClearFramesSelected",227,"_
                           A  2507    
041411 DDE5                A  2508    	PUSH	IX
041413 DD210000 00         A  2509    	LD	IX,0
041418 DD39                A  2510    	ADD	IX,SP
                           A  2511    ;  228		putch(23); // vdu_sys
                           A  2512    .LINE 228
                           A  2513    
04141A 01170000            A  2514    	LD	BC,23
04141E C5                  A  2515    	PUSH	BC
04141F CD 1F 19 04         A  2516    	CALL	_putch
041423 C1                  A  2517    	POP	BC
                           A  2518    ;  229		putch(27); // sprite command
                           A  2519    .LINE 229
                           A  2520    
041424 011B0000            A  2521    	LD	BC,27
041428 C5                  A  2522    	PUSH	BC
041429 CD 1F 19 04         A  2523    	CALL	_putch
04142D C1                  A  2524    	POP	BC
                           A  2525    ;  230		putch(5);  // clear frames
                           A  2526    .LINE 230
                           A  2527    
04142E 01050000            A  2528    	LD	BC,5
041432 C5                  A  2529    	PUSH	BC
041433 CD 1F 19 04         A  2530    	CALL	_putch
041437 C1                  A  2531    	POP	BC
                           A  2532    ;  231		return;				
                           A  2533    ;  232	}
                           A  2534    .LINE 232
                           A  2535    
041438 DDF9                A  2536    	LD	SP,IX
04143A DDE1                A  2537    	POP	IX
04143C C9                  A  2538    	RET	
                           A  2539    
                           A  2540    
                           A  2541    ;**************************** _vdp_spriteClearF
                           A  2542    ;Name                         Addr/Register   S
                           A  2543    ;_putch                              IMPORT  --
                           A  2544    
                           A  2545    
                           A  2546    ; Stack Frame Size: 6 (bytes)
                           A  2547    ;       Spill Code: 0 (instruction)
                           A  2548    
                           A  2549    
                           A  2550    .ENDFUNC "vdp_spriteClearFramesSelected",232,"_
                           A  2551    ;  233	
                           A  2552    ;  234	void vdp_spriteClearFrames(UINT8 bitmap
                           A  2553    ;  235	{
04143D                     A  2554    _vdp_spriteClearFrames:
                           A  2555    .DEFINE "_vdp_spriteClearFrames"
                           A  2556    
                           A  2557    .VALUE _vdp_spriteClearFrames
                           A  2558    
                           A  2559    .CLASS 2
                           A  2560    
                           A  2561    .TYPE 65
                           A  2562    
                           A  2563    .ENDEF
                           A  2564    
                           A  2565    .BEGFUNC "vdp_spriteClearFrames",235,"_vdp_spri
                           A  2566    
                           A  2567    .LINE 235
                           A  2568    
                           A  2569    .DEFINE "bitmapid"
                           A  2570    
                           A  2571    .CLASS 65
                           A  2572    
                           A  2573    .VALUE 6
                           A  2574    
                           A  2575    .TYPE 12
                           A  2576    
                           A  2577    .ENDEF
                           A  2578    
04143D DDE5                A  2579    	PUSH	IX
04143F DD210000 00         A  2580    	LD	IX,0
041444 DD39                A  2581    	ADD	IX,SP
                           A  2582    ;  236		vdp_spriteSelect(bitmapid);
                           A  2583    .LINE 236
                           A  2584    
041446 DD4E06              A  2585    	LD	C,(IX+%6)
041449 0600                A  2586    	LD	B,%0
04144B C5                  A  2587    	PUSH	BC
04144C CD D8 13 04         A  2588    	CALL	_vdp_spriteSelect
041450 C1                  A  2589    	POP	BC
                           A  2590    ;  237		vdp_spriteClearFramesSelected();
                           A  2591    .LINE 237
                           A  2592    
041451 CD 11 14 04         A  2593    	CALL	_vdp_spriteClearFramesSelected
                           A  2594    ;  238		return;				
                           A  2595    ;  239	}
                           A  2596    .LINE 239
                           A  2597    
041455 DDF9                A  2598    	LD	SP,IX
041457 DDE1                A  2599    	POP	IX
041459 C9                  A  2600    	RET	
                           A  2601    
                           A  2602    
                           A  2603    ;**************************** _vdp_spriteClearF
                           A  2604    ;Name                         Addr/Register   S
                           A  2605    ;bitmapid                              IX+6    
                           A  2606    
                           A  2607    
                           A  2608    ; Stack Frame Size: 9 (bytes)
                           A  2609    ;       Spill Code: 0 (instruction)
                           A  2610    
                           A  2611    
                           A  2612    .ENDFUNC "vdp_spriteClearFrames",239,"_vdp_spri
                           A  2613    ;  240	
                           A  2614    ;  241	void vdp_spriteAddFrameSelected(UINT8 b
                           A  2615    ;  242	{
04145A                     A  2616    _vdp_spriteAddFrameSelected:
                           A  2617    .DEFINE "_vdp_spriteAddFrameSelected"
                           A  2618    
                           A  2619    .VALUE _vdp_spriteAddFrameSelected
                           A  2620    
                           A  2621    .CLASS 2
                           A  2622    
                           A  2623    .TYPE 65
                           A  2624    
                           A  2625    .ENDEF
                           A  2626    
                           A  2627    .BEGFUNC "vdp_spriteAddFrameSelected",242,"_vdp
                           A  2628    
                           A  2629    .LINE 242
                           A  2630    
                           A  2631    .DEFINE "bitmapid"
                           A  2632    
                           A  2633    .CLASS 65
                           A  2634    
                           A  2635    .VALUE 6
                           A  2636    
                           A  2637    .TYPE 12
                           A  2638    
                           A  2639    .ENDEF
                           A  2640    
04145A DDE5                A  2641    	PUSH	IX
04145C DD210000 00         A  2642    	LD	IX,0
041461 DD39                A  2643    	ADD	IX,SP
                           A  2644    ;  243		putch(23); // vdu_sys
                           A  2645    .LINE 243
                           A  2646    
041463 01170000            A  2647    	LD	BC,23
041467 C5                  A  2648    	PUSH	BC
041468 CD 1F 19 04         A  2649    	CALL	_putch
04146C C1                  A  2650    	POP	BC
                           A  2651    ;  244		putch(27); // sprite command
                           A  2652    .LINE 244
                           A  2653    
04146D 011B0000            A  2654    	LD	BC,27
041471 C5                  A  2655    	PUSH	BC
041472 CD 1F 19 04         A  2656    	CALL	_putch
041476 C1                  A  2657    	POP	BC
                           A  2658    ;  245		putch(6);  // add frame
                           A  2659    .LINE 245
                           A  2660    
041477 01060000            A  2661    	LD	BC,6
04147B C5                  A  2662    	PUSH	BC
04147C CD 1F 19 04         A  2663    	CALL	_putch
041480 C1                  A  2664    	POP	BC
                           A  2665    ;  246		putch(bitmapid);
                           A  2666    .LINE 246
                           A  2667    
041481 DD7E06              A  2668    	LD	A,(IX+%6)
041484 B7ED62              A  2669    	UEXT	HL
041487 6F                  A  2670    	LD	L,A
041488 E5                  A  2671    	PUSH	HL
041489 CD 1F 19 04         A  2672    	CALL	_putch
04148D C1                  A  2673    	POP	BC
                           A  2674    ;  247		return;	
                           A  2675    ;  248	}
                           A  2676    .LINE 248
                           A  2677    
04148E DDF9                A  2678    	LD	SP,IX
041490 DDE1                A  2679    	POP	IX
041492 C9                  A  2680    	RET	
                           A  2681    
                           A  2682    
                           A  2683    ;**************************** _vdp_spriteAddFra
                           A  2684    ;Name                         Addr/Register   S
                           A  2685    ;_putch                              IMPORT  --
                           A  2686    ;bitmapid                              IX+6    
                           A  2687    
                           A  2688    
                           A  2689    ; Stack Frame Size: 9 (bytes)
                           A  2690    ;       Spill Code: 0 (instruction)
                           A  2691    
                           A  2692    
                           A  2693    .ENDFUNC "vdp_spriteAddFrameSelected",248,"_vdp
                           A  2694    ;  249	
                           A  2695    ;  250	void vdp_spriteAddFrame(UINT8 id, UINT8
                           A  2696    ;  251	{
041493                     A  2697    _vdp_spriteAddFrame:
                           A  2698    .DEFINE "_vdp_spriteAddFrame"
                           A  2699    
                           A  2700    .VALUE _vdp_spriteAddFrame
                           A  2701    
                           A  2702    .CLASS 2
                           A  2703    
                           A  2704    .TYPE 65
                           A  2705    
                           A  2706    .ENDEF
                           A  2707    
                           A  2708    .BEGFUNC "vdp_spriteAddFrame",251,"_vdp_spriteA
                           A  2709    
                           A  2710    .LINE 251
                           A  2711    
                           A  2712    .DEFINE "id"
                           A  2713    
                           A  2714    .CLASS 65
                           A  2715    
                           A  2716    .VALUE 6
                           A  2717    
                           A  2718    .TYPE 12
                           A  2719    
                           A  2720    .ENDEF
                           A  2721    
                           A  2722    .DEFINE "bitmapid"
                           A  2723    
                           A  2724    .CLASS 65
                           A  2725    
                           A  2726    .VALUE 9
                           A  2727    
                           A  2728    .TYPE 12
                           A  2729    
                           A  2730    .ENDEF
                           A  2731    
041493 DDE5                A  2732    	PUSH	IX
041495 DD210000 00         A  2733    	LD	IX,0
04149A DD39                A  2734    	ADD	IX,SP
                           A  2735    ;  252		vdp_spriteSelect(id);
                           A  2736    .LINE 252
                           A  2737    
04149C DD4E06              A  2738    	LD	C,(IX+%6)
04149F 0600                A  2739    	LD	B,%0
0414A1 C5                  A  2740    	PUSH	BC
0414A2 CD D8 13 04         A  2741    	CALL	_vdp_spriteSelect
0414A6 C1                  A  2742    	POP	BC
                           A  2743    ;  253		vdp_spriteAddFrameSelected(bitmapid
                           A  2744    .LINE 253
                           A  2745    
0414A7 DD4E09              A  2746    	LD	C,(IX+%9)
0414AA 0600                A  2747    	LD	B,%0
0414AC C5                  A  2748    	PUSH	BC
0414AD CD 5A 14 04         A  2749    	CALL	_vdp_spriteAddFrameSelected
0414B1 C1                  A  2750    	POP	BC
                           A  2751    ;  254		return;	
                           A  2752    ;  255	}
                           A  2753    .LINE 255
                           A  2754    
0414B2 DDF9                A  2755    	LD	SP,IX
0414B4 DDE1                A  2756    	POP	IX
0414B6 C9                  A  2757    	RET	
                           A  2758    
                           A  2759    
                           A  2760    ;**************************** _vdp_spriteAddFra
                           A  2761    ;Name                         Addr/Register   S
                           A  2762    ;bitmapid                              IX+9    
                           A  2763    ;id                                    IX+6    
                           A  2764    
                           A  2765    
                           A  2766    ; Stack Frame Size: 12 (bytes)
                           A  2767    ;       Spill Code: 0 (instruction)
                           A  2768    
                           A  2769    
                           A  2770    .ENDFUNC "vdp_spriteAddFrame",255,"_vdp_spriteA
                           A  2771    ;  256	
                           A  2772    ;  257	void vdp_spriteNextFrameSelected(void)
                           A  2773    ;  258	{
0414B7                     A  2774    _vdp_spriteNextFrameSelected:
                           A  2775    .DEFINE "_vdp_spriteNextFrameSelected"
                           A  2776    
                           A  2777    .VALUE _vdp_spriteNextFrameSelected
                           A  2778    
                           A  2779    .CLASS 2
                           A  2780    
                           A  2781    .TYPE 65
                           A  2782    
                           A  2783    .ENDEF
                           A  2784    
                           A  2785    .BEGFUNC "vdp_spriteNextFrameSelected",258,"_vd
                           A  2786    
0414B7 DDE5                A  2787    	PUSH	IX
0414B9 DD210000 00         A  2788    	LD	IX,0
0414BE DD39                A  2789    	ADD	IX,SP
                           A  2790    ;  259		putch(23); // vdu_sys
                           A  2791    .LINE 259
                           A  2792    
0414C0 01170000            A  2793    	LD	BC,23
0414C4 C5                  A  2794    	PUSH	BC
0414C5 CD 1F 19 04         A  2795    	CALL	_putch
0414C9 C1                  A  2796    	POP	BC
                           A  2797    ;  260		putch(27); // sprite command
                           A  2798    .LINE 260
                           A  2799    
0414CA 011B0000            A  2800    	LD	BC,27
0414CE C5                  A  2801    	PUSH	BC
0414CF CD 1F 19 04         A  2802    	CALL	_putch
0414D3 C1                  A  2803    	POP	BC
                           A  2804    ;  261		putch(8);  // next frame
                           A  2805    .LINE 261
                           A  2806    
0414D4 01080000            A  2807    	LD	BC,8
0414D8 C5                  A  2808    	PUSH	BC
0414D9 CD 1F 19 04         A  2809    	CALL	_putch
0414DD C1                  A  2810    	POP	BC
                           A  2811    ;  262		return;			
                           A  2812    ;  263	}
                           A  2813    .LINE 263
                           A  2814    
0414DE DDF9                A  2815    	LD	SP,IX
0414E0 DDE1                A  2816    	POP	IX
0414E2 C9                  A  2817    	RET	
                           A  2818    
                           A  2819    
                           A  2820    ;**************************** _vdp_spriteNextFr
                           A  2821    ;Name                         Addr/Register   S
                           A  2822    ;_putch                              IMPORT  --
                           A  2823    
                           A  2824    
                           A  2825    ; Stack Frame Size: 6 (bytes)
                           A  2826    ;       Spill Code: 0 (instruction)
                           A  2827    
                           A  2828    
                           A  2829    .ENDFUNC "vdp_spriteNextFrameSelected",263,"_vd
                           A  2830    ;  264	
                           A  2831    ;  265	void vdp_spriteNextFrame(UINT8 id)
                           A  2832    ;  266	{
0414E3                     A  2833    _vdp_spriteNextFrame:
                           A  2834    .DEFINE "_vdp_spriteNextFrame"
                           A  2835    
                           A  2836    .VALUE _vdp_spriteNextFrame
                           A  2837    
                           A  2838    .CLASS 2
                           A  2839    
                           A  2840    .TYPE 65
                           A  2841    
                           A  2842    .ENDEF
                           A  2843    
                           A  2844    .BEGFUNC "vdp_spriteNextFrame",266,"_vdp_sprite
                           A  2845    
                           A  2846    .LINE 266
                           A  2847    
                           A  2848    .DEFINE "id"
                           A  2849    
                           A  2850    .CLASS 65
                           A  2851    
                           A  2852    .VALUE 6
                           A  2853    
                           A  2854    .TYPE 12
                           A  2855    
                           A  2856    .ENDEF
                           A  2857    
0414E3 DDE5                A  2858    	PUSH	IX
0414E5 DD210000 00         A  2859    	LD	IX,0
0414EA DD39                A  2860    	ADD	IX,SP
                           A  2861    ;  267		vdp_spriteSelect(id);
                           A  2862    .LINE 267
                           A  2863    
0414EC DD4E06              A  2864    	LD	C,(IX+%6)
0414EF 0600                A  2865    	LD	B,%0
0414F1 C5                  A  2866    	PUSH	BC
0414F2 CD D8 13 04         A  2867    	CALL	_vdp_spriteSelect
0414F6 C1                  A  2868    	POP	BC
                           A  2869    ;  268		vdp_spriteNextFrameSelected();
                           A  2870    .LINE 268
                           A  2871    
0414F7 CD B7 14 04         A  2872    	CALL	_vdp_spriteNextFrameSelected
                           A  2873    ;  269		return;
                           A  2874    ;  270	}
                           A  2875    .LINE 270
                           A  2876    
0414FB DDF9                A  2877    	LD	SP,IX
0414FD DDE1                A  2878    	POP	IX
0414FF C9                  A  2879    	RET	
                           A  2880    
                           A  2881    
                           A  2882    ;**************************** _vdp_spriteNextFr
                           A  2883    ;Name                         Addr/Register   S
                           A  2884    ;id                                    IX+6    
                           A  2885    
                           A  2886    
                           A  2887    ; Stack Frame Size: 9 (bytes)
                           A  2888    ;       Spill Code: 0 (instruction)
                           A  2889    
                           A  2890    
                           A  2891    .ENDFUNC "vdp_spriteNextFrame",270,"_vdp_sprite
                           A  2892    ;  271	
                           A  2893    ;  272	void vdp_spritePreviousFrameSelected(vo
                           A  2894    ;  273	{
041500                     A  2895    _vdp_spritePreviousFrameSelected:
                           A  2896    .DEFINE "_vdp_spritePreviousFrameSelected"
                           A  2897    
                           A  2898    .VALUE _vdp_spritePreviousFrameSelected
                           A  2899    
                           A  2900    .CLASS 2
                           A  2901    
                           A  2902    .TYPE 65
                           A  2903    
                           A  2904    .ENDEF
                           A  2905    
                           A  2906    .BEGFUNC "vdp_spritePreviousFrameSelected",273,
                           A  2907    
041500 DDE5                A  2908    	PUSH	IX
041502 DD210000 00         A  2909    	LD	IX,0
041507 DD39                A  2910    	ADD	IX,SP
                           A  2911    ;  274		putch(23); // vdu_sys
                           A  2912    .LINE 274
                           A  2913    
041509 01170000            A  2914    	LD	BC,23
04150D C5                  A  2915    	PUSH	BC
04150E CD 1F 19 04         A  2916    	CALL	_putch
041512 C1                  A  2917    	POP	BC
                           A  2918    ;  275		putch(27); // sprite command
                           A  2919    .LINE 275
                           A  2920    
041513 011B0000            A  2921    	LD	BC,27
041517 C5                  A  2922    	PUSH	BC
041518 CD 1F 19 04         A  2923    	CALL	_putch
04151C C1                  A  2924    	POP	BC
                           A  2925    ;  276		putch(9); // previous frame
                           A  2926    .LINE 276
                           A  2927    
04151D 01090000            A  2928    	LD	BC,9
041521 C5                  A  2929    	PUSH	BC
041522 CD 1F 19 04         A  2930    	CALL	_putch
041526 C1                  A  2931    	POP	BC
                           A  2932    ;  277		return;	
                           A  2933    ;  278	}
                           A  2934    .LINE 278
                           A  2935    
041527 DDF9                A  2936    	LD	SP,IX
041529 DDE1                A  2937    	POP	IX
04152B C9                  A  2938    	RET	
                           A  2939    
                           A  2940    
                           A  2941    ;**************************** _vdp_spritePrevio
                           A  2942    ;Name                         Addr/Register   S
                           A  2943    ;_putch                              IMPORT  --
                           A  2944    
                           A  2945    
                           A  2946    ; Stack Frame Size: 6 (bytes)
                           A  2947    ;       Spill Code: 0 (instruction)
                           A  2948    
                           A  2949    
                           A  2950    .ENDFUNC "vdp_spritePreviousFrameSelected",278,
                           A  2951    ;  279	
                           A  2952    ;  280	void vdp_spritePreviousFrame(UINT8 id)
                           A  2953    ;  281	{
04152C                     A  2954    _vdp_spritePreviousFrame:
                           A  2955    .DEFINE "_vdp_spritePreviousFrame"
                           A  2956    
                           A  2957    .VALUE _vdp_spritePreviousFrame
                           A  2958    
                           A  2959    .CLASS 2
                           A  2960    
                           A  2961    .TYPE 65
                           A  2962    
                           A  2963    .ENDEF
                           A  2964    
                           A  2965    .BEGFUNC "vdp_spritePreviousFrame",281,"_vdp_sp
                           A  2966    
                           A  2967    .LINE 281
                           A  2968    
                           A  2969    .DEFINE "id"
                           A  2970    
                           A  2971    .CLASS 65
                           A  2972    
                           A  2973    .VALUE 6
                           A  2974    
                           A  2975    .TYPE 12
                           A  2976    
                           A  2977    .ENDEF
                           A  2978    
04152C DDE5                A  2979    	PUSH	IX
04152E DD210000 00         A  2980    	LD	IX,0
041533 DD39                A  2981    	ADD	IX,SP
                           A  2982    ;  282		vdp_spriteSelect(id);
                           A  2983    .LINE 282
                           A  2984    
041535 DD4E06              A  2985    	LD	C,(IX+%6)
041538 0600                A  2986    	LD	B,%0
04153A C5                  A  2987    	PUSH	BC
04153B CD D8 13 04         A  2988    	CALL	_vdp_spriteSelect
04153F C1                  A  2989    	POP	BC
                           A  2990    ;  283		vdp_spritePreviousFrameSelected();
                           A  2991    .LINE 283
                           A  2992    
041540 CD 00 15 04         A  2993    	CALL	_vdp_spritePreviousFrameSelected
                           A  2994    ;  284		return;
                           A  2995    ;  285	}
                           A  2996    .LINE 285
                           A  2997    
041544 DDF9                A  2998    	LD	SP,IX
041546 DDE1                A  2999    	POP	IX
041548 C9                  A  3000    	RET	
                           A  3001    
                           A  3002    
                           A  3003    ;**************************** _vdp_spritePrevio
                           A  3004    ;Name                         Addr/Register   S
                           A  3005    ;id                                    IX+6    
                           A  3006    
                           A  3007    
                           A  3008    ; Stack Frame Size: 9 (bytes)
                           A  3009    ;       Spill Code: 0 (instruction)
                           A  3010    
                           A  3011    
                           A  3012    .ENDFUNC "vdp_spritePreviousFrame",285,"_vdp_sp
                           A  3013    ;  286	
                           A  3014    ;  287	void vdp_spriteSetFrameSelected(UINT8 f
                           A  3015    ;  288	{
041549                     A  3016    _vdp_spriteSetFrameSelected:
                           A  3017    .DEFINE "_vdp_spriteSetFrameSelected"
                           A  3018    
                           A  3019    .VALUE _vdp_spriteSetFrameSelected
                           A  3020    
                           A  3021    .CLASS 2
                           A  3022    
                           A  3023    .TYPE 65
                           A  3024    
                           A  3025    .ENDEF
                           A  3026    
                           A  3027    .BEGFUNC "vdp_spriteSetFrameSelected",288,"_vdp
                           A  3028    
                           A  3029    .LINE 288
                           A  3030    
                           A  3031    .DEFINE "framenumber"
                           A  3032    
                           A  3033    .CLASS 65
                           A  3034    
                           A  3035    .VALUE 6
                           A  3036    
                           A  3037    .TYPE 12
                           A  3038    
                           A  3039    .ENDEF
                           A  3040    
041549 DDE5                A  3041    	PUSH	IX
04154B DD210000 00         A  3042    	LD	IX,0
041550 DD39                A  3043    	ADD	IX,SP
                           A  3044    ;  289		putch(23); // vdu_sys
                           A  3045    .LINE 289
                           A  3046    
041552 01170000            A  3047    	LD	BC,23
041556 C5                  A  3048    	PUSH	BC
041557 CD 1F 19 04         A  3049    	CALL	_putch
04155B C1                  A  3050    	POP	BC
                           A  3051    ;  290		putch(27); // sprite command
                           A  3052    .LINE 290
                           A  3053    
04155C 011B0000            A  3054    	LD	BC,27
041560 C5                  A  3055    	PUSH	BC
041561 CD 1F 19 04         A  3056    	CALL	_putch
041565 C1                  A  3057    	POP	BC
                           A  3058    ;  291		putch(10); // set current frame
                           A  3059    .LINE 291
                           A  3060    
041566 010A0000            A  3061    	LD	BC,10
04156A C5                  A  3062    	PUSH	BC
04156B CD 1F 19 04         A  3063    	CALL	_putch
04156F C1                  A  3064    	POP	BC
                           A  3065    ;  292		putch(framenumber);
                           A  3066    .LINE 292
                           A  3067    
041570 DD7E06              A  3068    	LD	A,(IX+%6)
041573 B7ED62              A  3069    	UEXT	HL
041576 6F                  A  3070    	LD	L,A
041577 E5                  A  3071    	PUSH	HL
041578 CD 1F 19 04         A  3072    	CALL	_putch
04157C C1                  A  3073    	POP	BC
                           A  3074    ;  293		return;	
                           A  3075    ;  294	}
                           A  3076    .LINE 294
                           A  3077    
04157D DDF9                A  3078    	LD	SP,IX
04157F DDE1                A  3079    	POP	IX
041581 C9                  A  3080    	RET	
                           A  3081    
                           A  3082    
                           A  3083    ;**************************** _vdp_spriteSetFra
                           A  3084    ;Name                         Addr/Register   S
                           A  3085    ;_putch                              IMPORT  --
                           A  3086    ;framenumber                           IX+6    
                           A  3087    
                           A  3088    
                           A  3089    ; Stack Frame Size: 9 (bytes)
                           A  3090    ;       Spill Code: 0 (instruction)
                           A  3091    
                           A  3092    
                           A  3093    .ENDFUNC "vdp_spriteSetFrameSelected",294,"_vdp
                           A  3094    ;  295	
                           A  3095    ;  296	void vdp_spriteSetFrame(UINT8 id, UINT8
                           A  3096    ;  297	{
041582                     A  3097    _vdp_spriteSetFrame:
                           A  3098    .DEFINE "_vdp_spriteSetFrame"
                           A  3099    
                           A  3100    .VALUE _vdp_spriteSetFrame
                           A  3101    
                           A  3102    .CLASS 2
                           A  3103    
                           A  3104    .TYPE 65
                           A  3105    
                           A  3106    .ENDEF
                           A  3107    
                           A  3108    .BEGFUNC "vdp_spriteSetFrame",297,"_vdp_spriteS
                           A  3109    
                           A  3110    .LINE 297
                           A  3111    
                           A  3112    .DEFINE "id"
                           A  3113    
                           A  3114    .CLASS 65
                           A  3115    
                           A  3116    .VALUE 6
                           A  3117    
                           A  3118    .TYPE 12
                           A  3119    
                           A  3120    .ENDEF
                           A  3121    
                           A  3122    .DEFINE "framenumber"
                           A  3123    
                           A  3124    .CLASS 65
                           A  3125    
                           A  3126    .VALUE 9
                           A  3127    
                           A  3128    .TYPE 12
                           A  3129    
                           A  3130    .ENDEF
                           A  3131    
041582 DDE5                A  3132    	PUSH	IX
041584 DD210000 00         A  3133    	LD	IX,0
041589 DD39                A  3134    	ADD	IX,SP
                           A  3135    ;  298		vdp_spriteSelect(id);
                           A  3136    .LINE 298
                           A  3137    
04158B DD4E06              A  3138    	LD	C,(IX+%6)
04158E 0600                A  3139    	LD	B,%0
041590 C5                  A  3140    	PUSH	BC
041591 CD D8 13 04         A  3141    	CALL	_vdp_spriteSelect
041595 C1                  A  3142    	POP	BC
                           A  3143    ;  299		vdp_spriteNextFrameSelected();
                           A  3144    .LINE 299
                           A  3145    
041596 CD B7 14 04         A  3146    	CALL	_vdp_spriteNextFrameSelected
                           A  3147    ;  300		return;
                           A  3148    ;  301	}
                           A  3149    .LINE 301
                           A  3150    
04159A DDF9                A  3151    	LD	SP,IX
04159C DDE1                A  3152    	POP	IX
04159E C9                  A  3153    	RET	
                           A  3154    
                           A  3155    
                           A  3156    ;**************************** _vdp_spriteSetFra
                           A  3157    ;Name                         Addr/Register   S
                           A  3158    ;framenumber                           IX+9    
                           A  3159    ;id                                    IX+6    
                           A  3160    
                           A  3161    
                           A  3162    ; Stack Frame Size: 12 (bytes)
                           A  3163    ;       Spill Code: 0 (instruction)
                           A  3164    
                           A  3165    
                           A  3166    .ENDFUNC "vdp_spriteSetFrame",301,"_vdp_spriteS
                           A  3167    ;  302	
                           A  3168    ;  303	void vdp_spriteShowSelected(void)
                           A  3169    ;  304	{
04159F                     A  3170    _vdp_spriteShowSelected:
                           A  3171    .DEFINE "_vdp_spriteShowSelected"
                           A  3172    
                           A  3173    .VALUE _vdp_spriteShowSelected
                           A  3174    
                           A  3175    .CLASS 2
                           A  3176    
                           A  3177    .TYPE 65
                           A  3178    
                           A  3179    .ENDEF
                           A  3180    
                           A  3181    .BEGFUNC "vdp_spriteShowSelected",304,"_vdp_spr
                           A  3182    
04159F DDE5                A  3183    	PUSH	IX
0415A1 DD210000 00         A  3184    	LD	IX,0
0415A6 DD39                A  3185    	ADD	IX,SP
                           A  3186    ;  305		putch(23); // vdu_sys
                           A  3187    .LINE 305
                           A  3188    
0415A8 01170000            A  3189    	LD	BC,23
0415AC C5                  A  3190    	PUSH	BC
0415AD CD 1F 19 04         A  3191    	CALL	_putch
0415B1 C1                  A  3192    	POP	BC
                           A  3193    ;  306		putch(27); // sprite command
                           A  3194    .LINE 306
                           A  3195    
0415B2 011B0000            A  3196    	LD	BC,27
0415B6 C5                  A  3197    	PUSH	BC
0415B7 CD 1F 19 04         A  3198    	CALL	_putch
0415BB C1                  A  3199    	POP	BC
                           A  3200    ;  307		putch(11); // show sprite
                           A  3201    .LINE 307
                           A  3202    
0415BC 010B0000            A  3203    	LD	BC,11
0415C0 C5                  A  3204    	PUSH	BC
0415C1 CD 1F 19 04         A  3205    	CALL	_putch
0415C5 C1                  A  3206    	POP	BC
                           A  3207    ;  308		return;			
                           A  3208    ;  309	}
                           A  3209    .LINE 309
                           A  3210    
0415C6 DDF9                A  3211    	LD	SP,IX
0415C8 DDE1                A  3212    	POP	IX
0415CA C9                  A  3213    	RET	
                           A  3214    
                           A  3215    
                           A  3216    ;**************************** _vdp_spriteShowSe
                           A  3217    ;Name                         Addr/Register   S
                           A  3218    ;_putch                              IMPORT  --
                           A  3219    
                           A  3220    
                           A  3221    ; Stack Frame Size: 6 (bytes)
                           A  3222    ;       Spill Code: 0 (instruction)
                           A  3223    
                           A  3224    
                           A  3225    .ENDFUNC "vdp_spriteShowSelected",309,"_vdp_spr
                           A  3226    ;  310	
                           A  3227    ;  311	void vdp_spriteShow(UINT8 id)
                           A  3228    ;  312	{
0415CB                     A  3229    _vdp_spriteShow:
                           A  3230    .DEFINE "_vdp_spriteShow"
                           A  3231    
                           A  3232    .VALUE _vdp_spriteShow
                           A  3233    
                           A  3234    .CLASS 2
                           A  3235    
                           A  3236    .TYPE 65
                           A  3237    
                           A  3238    .ENDEF
                           A  3239    
                           A  3240    .BEGFUNC "vdp_spriteShow",312,"_vdp_spriteShow"
                           A  3241    
                           A  3242    .LINE 312
                           A  3243    
                           A  3244    .DEFINE "id"
                           A  3245    
                           A  3246    .CLASS 65
                           A  3247    
                           A  3248    .VALUE 6
                           A  3249    
                           A  3250    .TYPE 12
                           A  3251    
                           A  3252    .ENDEF
                           A  3253    
0415CB DDE5                A  3254    	PUSH	IX
0415CD DD210000 00         A  3255    	LD	IX,0
0415D2 DD39                A  3256    	ADD	IX,SP
                           A  3257    ;  313		vdp_spriteSelect(id);
                           A  3258    .LINE 313
                           A  3259    
0415D4 DD4E06              A  3260    	LD	C,(IX+%6)
0415D7 0600                A  3261    	LD	B,%0
0415D9 C5                  A  3262    	PUSH	BC
0415DA CD D8 13 04         A  3263    	CALL	_vdp_spriteSelect
0415DE C1                  A  3264    	POP	BC
                           A  3265    ;  314		vdp_spriteShowSelected();
                           A  3266    .LINE 314
                           A  3267    
0415DF CD 9F 15 04         A  3268    	CALL	_vdp_spriteShowSelected
                           A  3269    ;  315		return;
                           A  3270    ;  316	}
                           A  3271    .LINE 316
                           A  3272    
0415E3 DDF9                A  3273    	LD	SP,IX
0415E5 DDE1                A  3274    	POP	IX
0415E7 C9                  A  3275    	RET	
                           A  3276    
                           A  3277    
                           A  3278    ;**************************** _vdp_spriteShow *
                           A  3279    ;Name                         Addr/Register   S
                           A  3280    ;id                                    IX+6    
                           A  3281    
                           A  3282    
                           A  3283    ; Stack Frame Size: 9 (bytes)
                           A  3284    ;       Spill Code: 0 (instruction)
                           A  3285    
                           A  3286    
                           A  3287    .ENDFUNC "vdp_spriteShow",316,"_vdp_spriteShow"
                           A  3288    ;  317	
                           A  3289    ;  318	void vdp_spriteHideSelected(void)
                           A  3290    ;  319	{
0415E8                     A  3291    _vdp_spriteHideSelected:
                           A  3292    .DEFINE "_vdp_spriteHideSelected"
                           A  3293    
                           A  3294    .VALUE _vdp_spriteHideSelected
                           A  3295    
                           A  3296    .CLASS 2
                           A  3297    
                           A  3298    .TYPE 65
                           A  3299    
                           A  3300    .ENDEF
                           A  3301    
                           A  3302    .BEGFUNC "vdp_spriteHideSelected",319,"_vdp_spr
                           A  3303    
0415E8 DDE5                A  3304    	PUSH	IX
0415EA DD210000 00         A  3305    	LD	IX,0
0415EF DD39                A  3306    	ADD	IX,SP
                           A  3307    ;  320		putch(23); // vdu_sys
                           A  3308    .LINE 320
                           A  3309    
0415F1 01170000            A  3310    	LD	BC,23
0415F5 C5                  A  3311    	PUSH	BC
0415F6 CD 1F 19 04         A  3312    	CALL	_putch
0415FA C1                  A  3313    	POP	BC
                           A  3314    ;  321		putch(27); // sprite command
                           A  3315    .LINE 321
                           A  3316    
0415FB 011B0000            A  3317    	LD	BC,27
0415FF C5                  A  3318    	PUSH	BC
041600 CD 1F 19 04         A  3319    	CALL	_putch
041604 C1                  A  3320    	POP	BC
                           A  3321    ;  322		putch(12); // hide sprite
                           A  3322    .LINE 322
                           A  3323    
041605 010C0000            A  3324    	LD	BC,12
041609 C5                  A  3325    	PUSH	BC
04160A CD 1F 19 04         A  3326    	CALL	_putch
04160E C1                  A  3327    	POP	BC
                           A  3328    ;  323		return;		
                           A  3329    ;  324	}
                           A  3330    .LINE 324
                           A  3331    
04160F DDF9                A  3332    	LD	SP,IX
041611 DDE1                A  3333    	POP	IX
041613 C9                  A  3334    	RET	
                           A  3335    
                           A  3336    
                           A  3337    ;**************************** _vdp_spriteHideSe
                           A  3338    ;Name                         Addr/Register   S
                           A  3339    ;_putch                              IMPORT  --
                           A  3340    
                           A  3341    
                           A  3342    ; Stack Frame Size: 6 (bytes)
                           A  3343    ;       Spill Code: 0 (instruction)
                           A  3344    
                           A  3345    
                           A  3346    .ENDFUNC "vdp_spriteHideSelected",324,"_vdp_spr
                           A  3347    ;  325	
                           A  3348    ;  326	void vdp_spriteHide(UINT8 id)
                           A  3349    ;  327	{
041614                     A  3350    _vdp_spriteHide:
                           A  3351    .DEFINE "_vdp_spriteHide"
                           A  3352    
                           A  3353    .VALUE _vdp_spriteHide
                           A  3354    
                           A  3355    .CLASS 2
                           A  3356    
                           A  3357    .TYPE 65
                           A  3358    
                           A  3359    .ENDEF
                           A  3360    
                           A  3361    .BEGFUNC "vdp_spriteHide",327,"_vdp_spriteHide"
                           A  3362    
                           A  3363    .LINE 327
                           A  3364    
                           A  3365    .DEFINE "id"
                           A  3366    
                           A  3367    .CLASS 65
                           A  3368    
                           A  3369    .VALUE 6
                           A  3370    
                           A  3371    .TYPE 12
                           A  3372    
                           A  3373    .ENDEF
                           A  3374    
041614 DDE5                A  3375    	PUSH	IX
041616 DD210000 00         A  3376    	LD	IX,0
04161B DD39                A  3377    	ADD	IX,SP
                           A  3378    ;  328		vdp_spriteSelect(id);
                           A  3379    .LINE 328
                           A  3380    
04161D DD4E06              A  3381    	LD	C,(IX+%6)
041620 0600                A  3382    	LD	B,%0
041622 C5                  A  3383    	PUSH	BC
041623 CD D8 13 04         A  3384    	CALL	_vdp_spriteSelect
041627 C1                  A  3385    	POP	BC
                           A  3386    ;  329		vdp_spriteHideSelected();
                           A  3387    .LINE 329
                           A  3388    
041628 CD E8 15 04         A  3389    	CALL	_vdp_spriteHideSelected
                           A  3390    ;  330		return;
                           A  3391    ;  331	}
                           A  3392    .LINE 331
                           A  3393    
04162C DDF9                A  3394    	LD	SP,IX
04162E DDE1                A  3395    	POP	IX
041630 C9                  A  3396    	RET	
                           A  3397    
                           A  3398    
                           A  3399    ;**************************** _vdp_spriteHide *
                           A  3400    ;Name                         Addr/Register   S
                           A  3401    ;id                                    IX+6    
                           A  3402    
                           A  3403    
                           A  3404    ; Stack Frame Size: 9 (bytes)
                           A  3405    ;       Spill Code: 0 (instruction)
                           A  3406    
                           A  3407    
                           A  3408    .ENDFUNC "vdp_spriteHide",331,"_vdp_spriteHide"
                           A  3409    ;  332	
                           A  3410    ;  333	void vdp_spriteMoveToSelected(UINT16 x,
                           A  3411    ;  334	{
041631                     A  3412    _vdp_spriteMoveToSelected:
                           A  3413    .DEFINE "_vdp_spriteMoveToSelected"
                           A  3414    
                           A  3415    .VALUE _vdp_spriteMoveToSelected
                           A  3416    
                           A  3417    .CLASS 2
                           A  3418    
                           A  3419    .TYPE 65
                           A  3420    
                           A  3421    .ENDEF
                           A  3422    
                           A  3423    .BEGFUNC "vdp_spriteMoveToSelected",334,"_vdp_s
                           A  3424    
                           A  3425    .LINE 334
                           A  3426    
                           A  3427    .DEFINE "x"
                           A  3428    
                           A  3429    .CLASS 65
                           A  3430    
                           A  3431    .VALUE 6
                           A  3432    
                           A  3433    .TYPE 13
                           A  3434    
                           A  3435    .ENDEF
                           A  3436    
                           A  3437    .DEFINE "y"
                           A  3438    
                           A  3439    .CLASS 65
                           A  3440    
                           A  3441    .VALUE 9
                           A  3442    
                           A  3443    .TYPE 13
                           A  3444    
                           A  3445    .ENDEF
                           A  3446    
041631 DDE5                A  3447    	PUSH	IX
041633 DD210000 00         A  3448    	LD	IX,0
041638 DD39                A  3449    	ADD	IX,SP
                           A  3450    ;  335		putch(23); // vdu_sys
                           A  3451    .LINE 335
                           A  3452    
04163A 01170000            A  3453    	LD	BC,23
04163E C5                  A  3454    	PUSH	BC
04163F CD 1F 19 04         A  3455    	CALL	_putch
041643 C1                  A  3456    	POP	BC
                           A  3457    ;  336		putch(27); // sprite command
                           A  3458    .LINE 336
                           A  3459    
041644 011B0000            A  3460    	LD	BC,27
041648 C5                  A  3461    	PUSH	BC
041649 CD 1F 19 04         A  3462    	CALL	_putch
04164D C1                  A  3463    	POP	BC
                           A  3464    ;  337		putch(13); // move to
                           A  3465    .LINE 337
                           A  3466    
04164E 010D0000            A  3467    	LD	BC,13
041652 C5                  A  3468    	PUSH	BC
041653 CD 1F 19 04         A  3469    	CALL	_putch
041657 C1                  A  3470    	POP	BC
                           A  3471    ;  338		write16bit(x);
                           A  3472    .LINE 338
                           A  3473    
041658 DD0706              A  3474    	LD	BC,(IX+%6)
04165B C5                  A  3475    	PUSH	BC
04165C CD 13 0E 04         A  3476    	CALL	_write16bit
041660 C1                  A  3477    	POP	BC
                           A  3478    ;  339		write16bit(y);
                           A  3479    .LINE 339
                           A  3480    
041661 DD0709              A  3481    	LD	BC,(IX+%9)
041664 C5                  A  3482    	PUSH	BC
041665 CD 13 0E 04         A  3483    	CALL	_write16bit
041669 C1                  A  3484    	POP	BC
                           A  3485    ;  340		return;	
                           A  3486    ;  341	}
                           A  3487    .LINE 341
                           A  3488    
04166A DDF9                A  3489    	LD	SP,IX
04166C DDE1                A  3490    	POP	IX
04166E C9                  A  3491    	RET	
                           A  3492    
                           A  3493    
                           A  3494    ;**************************** _vdp_spriteMoveTo
                           A  3495    ;Name                         Addr/Register   S
                           A  3496    ;_putch                              IMPORT  --
                           A  3497    ;y                                     IX+9    
                           A  3498    ;x                                     IX+6    
                           A  3499    
                           A  3500    
                           A  3501    ; Stack Frame Size: 12 (bytes)
                           A  3502    ;       Spill Code: 0 (instruction)
                           A  3503    
                           A  3504    
                           A  3505    .ENDFUNC "vdp_spriteMoveToSelected",341,"_vdp_s
                           A  3506    ;  342	
                           A  3507    ;  343	void vdp_spriteMoveTo(UINT8 id, UINT16 
                           A  3508    ;  344	{
04166F                     A  3509    _vdp_spriteMoveTo:
                           A  3510    .DEFINE "_vdp_spriteMoveTo"
                           A  3511    
                           A  3512    .VALUE _vdp_spriteMoveTo
                           A  3513    
                           A  3514    .CLASS 2
                           A  3515    
                           A  3516    .TYPE 65
                           A  3517    
                           A  3518    .ENDEF
                           A  3519    
                           A  3520    .BEGFUNC "vdp_spriteMoveTo",344,"_vdp_spriteMov
                           A  3521    
                           A  3522    .LINE 344
                           A  3523    
                           A  3524    .DEFINE "id"
                           A  3525    
                           A  3526    .CLASS 65
                           A  3527    
                           A  3528    .VALUE 6
                           A  3529    
                           A  3530    .TYPE 12
                           A  3531    
                           A  3532    .ENDEF
                           A  3533    
                           A  3534    .DEFINE "x"
                           A  3535    
                           A  3536    .CLASS 65
                           A  3537    
                           A  3538    .VALUE 9
                           A  3539    
                           A  3540    .TYPE 13
                           A  3541    
                           A  3542    .ENDEF
                           A  3543    
                           A  3544    .DEFINE "y"
                           A  3545    
                           A  3546    .CLASS 65
                           A  3547    
                           A  3548    .VALUE 12
                           A  3549    
                           A  3550    .TYPE 13
                           A  3551    
                           A  3552    .ENDEF
                           A  3553    
04166F DDE5                A  3554    	PUSH	IX
041671 DD210000 00         A  3555    	LD	IX,0
041676 DD39                A  3556    	ADD	IX,SP
                           A  3557    ;  345		vdp_spriteSelect(id);
                           A  3558    .LINE 345
                           A  3559    
041678 DD4E06              A  3560    	LD	C,(IX+%6)
04167B 0600                A  3561    	LD	B,%0
04167D C5                  A  3562    	PUSH	BC
04167E CD D8 13 04         A  3563    	CALL	_vdp_spriteSelect
041682 C1                  A  3564    	POP	BC
                           A  3565    ;  346		vdp_spriteMoveToSelected(x,y);
                           A  3566    .LINE 346
                           A  3567    
041683 DD070C              A  3568    	LD	BC,(IX+%C)
041686 C5                  A  3569    	PUSH	BC
041687 DD0709              A  3570    	LD	BC,(IX+%9)
04168A C5                  A  3571    	PUSH	BC
04168B CD 31 16 04         A  3572    	CALL	_vdp_spriteMoveToSelected
04168F C1                  A  3573    	POP	BC
041690 C1                  A  3574    	POP	BC
                           A  3575    ;  347		return;
                           A  3576    ;  348	}
                           A  3577    .LINE 348
                           A  3578    
041691 DDF9                A  3579    	LD	SP,IX
041693 DDE1                A  3580    	POP	IX
041695 C9                  A  3581    	RET	
                           A  3582    
                           A  3583    
                           A  3584    ;**************************** _vdp_spriteMoveTo
                           A  3585    ;Name                         Addr/Register   S
                           A  3586    ;y                                    IX+12    
                           A  3587    ;x                                     IX+9    
                           A  3588    ;id                                    IX+6    
                           A  3589    
                           A  3590    
                           A  3591    ; Stack Frame Size: 15 (bytes)
                           A  3592    ;       Spill Code: 0 (instruction)
                           A  3593    
                           A  3594    
                           A  3595    .ENDFUNC "vdp_spriteMoveTo",348,"_vdp_spriteMov
                           A  3596    ;  349	
                           A  3597    ;  350	void vdp_spriteMoveBySelected(UINT16 x,
                           A  3598    ;  351	{
041696                     A  3599    _vdp_spriteMoveBySelected:
                           A  3600    .DEFINE "_vdp_spriteMoveBySelected"
                           A  3601    
                           A  3602    .VALUE _vdp_spriteMoveBySelected
                           A  3603    
                           A  3604    .CLASS 2
                           A  3605    
                           A  3606    .TYPE 65
                           A  3607    
                           A  3608    .ENDEF
                           A  3609    
                           A  3610    .BEGFUNC "vdp_spriteMoveBySelected",351,"_vdp_s
                           A  3611    
                           A  3612    .LINE 351
                           A  3613    
                           A  3614    .DEFINE "x"
                           A  3615    
                           A  3616    .CLASS 65
                           A  3617    
                           A  3618    .VALUE 6
                           A  3619    
                           A  3620    .TYPE 13
                           A  3621    
                           A  3622    .ENDEF
                           A  3623    
                           A  3624    .DEFINE "y"
                           A  3625    
                           A  3626    .CLASS 65
                           A  3627    
                           A  3628    .VALUE 9
                           A  3629    
                           A  3630    .TYPE 13
                           A  3631    
                           A  3632    .ENDEF
                           A  3633    
041696 DDE5                A  3634    	PUSH	IX
041698 DD210000 00         A  3635    	LD	IX,0
04169D DD39                A  3636    	ADD	IX,SP
                           A  3637    ;  352		putch(23); // vdu_sys
                           A  3638    .LINE 352
                           A  3639    
04169F 01170000            A  3640    	LD	BC,23
0416A3 C5                  A  3641    	PUSH	BC
0416A4 CD 1F 19 04         A  3642    	CALL	_putch
0416A8 C1                  A  3643    	POP	BC
                           A  3644    ;  353		putch(27); // sprite command
                           A  3645    .LINE 353
                           A  3646    
0416A9 011B0000            A  3647    	LD	BC,27
0416AD C5                  A  3648    	PUSH	BC
0416AE CD 1F 19 04         A  3649    	CALL	_putch
0416B2 C1                  A  3650    	POP	BC
                           A  3651    ;  354		putch(14); // move by
                           A  3652    .LINE 354
                           A  3653    
0416B3 010E0000            A  3654    	LD	BC,14
0416B7 C5                  A  3655    	PUSH	BC
0416B8 CD 1F 19 04         A  3656    	CALL	_putch
0416BC C1                  A  3657    	POP	BC
                           A  3658    ;  355		write16bit(x);
                           A  3659    .LINE 355
                           A  3660    
0416BD DD0706              A  3661    	LD	BC,(IX+%6)
0416C0 C5                  A  3662    	PUSH	BC
0416C1 CD 13 0E 04         A  3663    	CALL	_write16bit
0416C5 C1                  A  3664    	POP	BC
                           A  3665    ;  356		write16bit(y);
                           A  3666    .LINE 356
                           A  3667    
0416C6 DD0709              A  3668    	LD	BC,(IX+%9)
0416C9 C5                  A  3669    	PUSH	BC
0416CA CD 13 0E 04         A  3670    	CALL	_write16bit
0416CE C1                  A  3671    	POP	BC
                           A  3672    ;  357		return;	
                           A  3673    ;  358	}
                           A  3674    .LINE 358
                           A  3675    
0416CF DDF9                A  3676    	LD	SP,IX
0416D1 DDE1                A  3677    	POP	IX
0416D3 C9                  A  3678    	RET	
                           A  3679    
                           A  3680    
                           A  3681    ;**************************** _vdp_spriteMoveBy
                           A  3682    ;Name                         Addr/Register   S
                           A  3683    ;_putch                              IMPORT  --
                           A  3684    ;y                                     IX+9    
                           A  3685    ;x                                     IX+6    
                           A  3686    
                           A  3687    
                           A  3688    ; Stack Frame Size: 12 (bytes)
                           A  3689    ;       Spill Code: 0 (instruction)
                           A  3690    
                           A  3691    
                           A  3692    .ENDFUNC "vdp_spriteMoveBySelected",358,"_vdp_s
                           A  3693    ;  359	
                           A  3694    ;  360	void vdp_spriteMoveBy(UINT8 id, UINT16 
                           A  3695    ;  361	{
0416D4                     A  3696    _vdp_spriteMoveBy:
                           A  3697    .DEFINE "_vdp_spriteMoveBy"
                           A  3698    
                           A  3699    .VALUE _vdp_spriteMoveBy
                           A  3700    
                           A  3701    .CLASS 2
                           A  3702    
                           A  3703    .TYPE 65
                           A  3704    
                           A  3705    .ENDEF
                           A  3706    
                           A  3707    .BEGFUNC "vdp_spriteMoveBy",361,"_vdp_spriteMov
                           A  3708    
                           A  3709    .LINE 361
                           A  3710    
                           A  3711    .DEFINE "id"
                           A  3712    
                           A  3713    .CLASS 65
                           A  3714    
                           A  3715    .VALUE 6
                           A  3716    
                           A  3717    .TYPE 12
                           A  3718    
                           A  3719    .ENDEF
                           A  3720    
                           A  3721    .DEFINE "x"
                           A  3722    
                           A  3723    .CLASS 65
                           A  3724    
                           A  3725    .VALUE 9
                           A  3726    
                           A  3727    .TYPE 13
                           A  3728    
                           A  3729    .ENDEF
                           A  3730    
                           A  3731    .DEFINE "y"
                           A  3732    
                           A  3733    .CLASS 65
                           A  3734    
                           A  3735    .VALUE 12
                           A  3736    
                           A  3737    .TYPE 13
                           A  3738    
                           A  3739    .ENDEF
                           A  3740    
0416D4 DDE5                A  3741    	PUSH	IX
0416D6 DD210000 00         A  3742    	LD	IX,0
0416DB DD39                A  3743    	ADD	IX,SP
                           A  3744    ;  362		vdp_spriteSelect(id);
                           A  3745    .LINE 362
                           A  3746    
0416DD DD4E06              A  3747    	LD	C,(IX+%6)
0416E0 0600                A  3748    	LD	B,%0
0416E2 C5                  A  3749    	PUSH	BC
0416E3 CD D8 13 04         A  3750    	CALL	_vdp_spriteSelect
0416E7 C1                  A  3751    	POP	BC
                           A  3752    ;  363		vdp_spriteMoveBySelected(x,y);
                           A  3753    .LINE 363
                           A  3754    
0416E8 DD070C              A  3755    	LD	BC,(IX+%C)
0416EB C5                  A  3756    	PUSH	BC
0416EC DD0709              A  3757    	LD	BC,(IX+%9)
0416EF C5                  A  3758    	PUSH	BC
0416F0 CD 96 16 04         A  3759    	CALL	_vdp_spriteMoveBySelected
0416F4 C1                  A  3760    	POP	BC
0416F5 C1                  A  3761    	POP	BC
                           A  3762    ;  364		return;
                           A  3763    ;  365	}
                           A  3764    .LINE 365
                           A  3765    
0416F6 DDF9                A  3766    	LD	SP,IX
0416F8 DDE1                A  3767    	POP	IX
0416FA C9                  A  3768    	RET	
                           A  3769    
                           A  3770    
                           A  3771    ;**************************** _vdp_spriteMoveBy
                           A  3772    ;Name                         Addr/Register   S
                           A  3773    ;y                                    IX+12    
                           A  3774    ;x                                     IX+9    
                           A  3775    ;id                                    IX+6    
                           A  3776    
                           A  3777    
                           A  3778    ; Stack Frame Size: 15 (bytes)
                           A  3779    ;       Spill Code: 0 (instruction)
                           A  3780    
                           A  3781    
                           A  3782    .ENDFUNC "vdp_spriteMoveBy",365,"_vdp_spriteMov
                           A  3783    ;  366	
                           A  3784    ;  367	void vdp_spriteActivateTotal(UINT8 numb
                           A  3785    ;  368	{
0416FB                     A  3786    _vdp_spriteActivateTotal:
                           A  3787    .DEFINE "_vdp_spriteActivateTotal"
                           A  3788    
                           A  3789    .VALUE _vdp_spriteActivateTotal
                           A  3790    
                           A  3791    .CLASS 2
                           A  3792    
                           A  3793    .TYPE 65
                           A  3794    
                           A  3795    .ENDEF
                           A  3796    
                           A  3797    .BEGFUNC "vdp_spriteActivateTotal",368,"_vdp_sp
                           A  3798    
                           A  3799    .LINE 368
                           A  3800    
                           A  3801    .DEFINE "number"
                           A  3802    
                           A  3803    .CLASS 65
                           A  3804    
                           A  3805    .VALUE 6
                           A  3806    
                           A  3807    .TYPE 12
                           A  3808    
                           A  3809    .ENDEF
                           A  3810    
0416FB DDE5                A  3811    	PUSH	IX
0416FD DD210000 00         A  3812    	LD	IX,0
041702 DD39                A  3813    	ADD	IX,SP
                           A  3814    ;  369		putch(23); // vdu_sys
                           A  3815    .LINE 369
                           A  3816    
041704 01170000            A  3817    	LD	BC,23
041708 C5                  A  3818    	PUSH	BC
041709 CD 1F 19 04         A  3819    	CALL	_putch
04170D C1                  A  3820    	POP	BC
                           A  3821    ;  370		putch(27); // sprite command
                           A  3822    .LINE 370
                           A  3823    
04170E 011B0000            A  3824    	LD	BC,27
041712 C5                  A  3825    	PUSH	BC
041713 CD 1F 19 04         A  3826    	CALL	_putch
041717 C1                  A  3827    	POP	BC
                           A  3828    ;  371		putch(7);  // set number of sprites
                           A  3829    .LINE 371
                           A  3830    
041718 01070000            A  3831    	LD	BC,7
04171C C5                  A  3832    	PUSH	BC
04171D CD 1F 19 04         A  3833    	CALL	_putch
041721 C1                  A  3834    	POP	BC
                           A  3835    ;  372		putch(number);
                           A  3836    .LINE 372
                           A  3837    
041722 DD7E06              A  3838    	LD	A,(IX+%6)
041725 B7ED62              A  3839    	UEXT	HL
041728 6F                  A  3840    	LD	L,A
041729 E5                  A  3841    	PUSH	HL
04172A CD 1F 19 04         A  3842    	CALL	_putch
04172E C1                  A  3843    	POP	BC
                           A  3844    ;  373		return;	
                           A  3845    ;  374	}
                           A  3846    .LINE 374
                           A  3847    
04172F DDF9                A  3848    	LD	SP,IX
041731 DDE1                A  3849    	POP	IX
041733 C9                  A  3850    	RET	
                           A  3851    
                           A  3852    
                           A  3853    ;**************************** _vdp_spriteActiva
                           A  3854    ;Name                         Addr/Register   S
                           A  3855    ;_putch                              IMPORT  --
                           A  3856    ;number                                IX+6    
                           A  3857    
                           A  3858    
                           A  3859    ; Stack Frame Size: 9 (bytes)
                           A  3860    ;       Spill Code: 0 (instruction)
                           A  3861    
                           A  3862    
                           A  3863    .ENDFUNC "vdp_spriteActivateTotal",374,"_vdp_sp
                           A  3864    ;  375	
                           A  3865    ;  376	void vdp_spriteRefresh(void)
                           A  3866    ;  377	{
041734                     A  3867    _vdp_spriteRefresh:
                           A  3868    .DEFINE "_vdp_spriteRefresh"
                           A  3869    
                           A  3870    .VALUE _vdp_spriteRefresh
                           A  3871    
                           A  3872    .CLASS 2
                           A  3873    
                           A  3874    .TYPE 65
                           A  3875    
                           A  3876    .ENDEF
                           A  3877    
                           A  3878    .BEGFUNC "vdp_spriteRefresh",377,"_vdp_spriteRe
                           A  3879    
041734 DDE5                A  3880    	PUSH	IX
041736 DD210000 00         A  3881    	LD	IX,0
04173B DD39                A  3882    	ADD	IX,SP
                           A  3883    ;  378		putch(23);	// vdu_sys
                           A  3884    .LINE 378
                           A  3885    
04173D 01170000            A  3886    	LD	BC,23
041741 C5                  A  3887    	PUSH	BC
041742 CD 1F 19 04         A  3888    	CALL	_putch
041746 C1                  A  3889    	POP	BC
                           A  3890    ;  379		putch(27);	// sprite command
                           A  3891    .LINE 379
                           A  3892    
041747 011B0000            A  3893    	LD	BC,27
04174B C5                  A  3894    	PUSH	BC
04174C CD 1F 19 04         A  3895    	CALL	_putch
041750 C1                  A  3896    	POP	BC
                           A  3897    ;  380		putch(15);	// refresh all sprites
                           A  3898    .LINE 380
                           A  3899    
041751 010F0000            A  3900    	LD	BC,15
041755 C5                  A  3901    	PUSH	BC
041756 CD 1F 19 04         A  3902    	CALL	_putch
04175A C1                  A  3903    	POP	BC
                           A  3904    ;  381		return;
                           A  3905    ;  382	}
                           A  3906    .LINE 382
                           A  3907    
04175B DDF9                A  3908    	LD	SP,IX
04175D DDE1                A  3909    	POP	IX
04175F C9                  A  3910    	RET	
                           A  3911    
                           A  3912    
                           A  3913    ;**************************** _vdp_spriteRefres
                           A  3914    ;Name                         Addr/Register   S
                           A  3915    ;_putch                              IMPORT  --
                           A  3916    
                           A  3917    
                           A  3918    ; Stack Frame Size: 6 (bytes)
                           A  3919    ;       Spill Code: 0 (instruction)
                           A  3920    
                           A  3921    
                           A  3922    .ENDFUNC "vdp_spriteRefresh",382,"_vdp_spriteRe
                           A  3923    ;  383	
                           A  3924    ;  384	UINT8 vdp_cursorGetXpos(void)
                           A  3925    ;  385	{
041760                     A  3926    _vdp_cursorGetXpos:
                           A  3927    .DEFINE "_vdp_cursorGetXpos"
                           A  3928    
                           A  3929    .VALUE _vdp_cursorGetXpos
                           A  3930    
                           A  3931    .CLASS 2
                           A  3932    
                           A  3933    .TYPE 76
                           A  3934    
                           A  3935    .ENDEF
                           A  3936    
                           A  3937    .BEGFUNC "vdp_cursorGetXpos",385,"_vdp_cursorGe
                           A  3938    
                           A  3939    .LINE 385
                           A  3940    
                           A  3941    .DEFINE "delay"
                           A  3942    
                           A  3943    .CLASS 65
                           A  3944    
                           A  3945    .VALUE -3
                           A  3946    
                           A  3947    .TYPE 14
                           A  3948    
                           A  3949    .ENDEF
                           A  3950    
041760 DDE5                A  3951    	PUSH	IX
041762 DD210000 00         A  3952    	LD	IX,0
041767 DD39                A  3953    	ADD	IX,SP
041769 C5                  A  3954    	PUSH	BC
                           A  3955    ;  386		unsigned int delay;
                           A  3956    ;  387		
                           A  3957    ;  388		putch(23);	// VDP command
                           A  3958    .LINE 388
                           A  3959    
04176A 01170000            A  3960    	LD	BC,23
04176E C5                  A  3961    	PUSH	BC
04176F CD 1F 19 04         A  3962    	CALL	_putch
041773 C1                  A  3963    	POP	BC
                           A  3964    ;  389		putch(0);	// VDP command
                           A  3965    .LINE 389
                           A  3966    
041774 01000000            A  3967    	LD	BC,0
041778 C5                  A  3968    	PUSH	BC
041779 CD 1F 19 04         A  3969    	CALL	_putch
04177D C1                  A  3970    	POP	BC
                           A  3971    ;  390		putch(2);	// Request cursor posit
                           A  3972    .LINE 390
                           A  3973    
04177E 01020000            A  3974    	LD	BC,2
041782 C5                  A  3975    	PUSH	BC
041783 CD 1F 19 04         A  3976    	CALL	_putch
041787 C1                  A  3977    	POP	BC
                           A  3978    ;  391		
                           A  3979    ;  392		delay = 255;
                           A  3980    .LINE 392
                           A  3981    
041788 01FF0000            A  3982    	LD	BC,255
04178C DD0FFD              A  3983    	LD	(IX+%FFFFFFFD),BC
                           A  3984    ;  393		while(delay--);
04178F                     A  3985    L_59:
                           A  3986    .LINE 393
                           A  3987    
04178F DD27FD              A  3988    	LD	HL,(IX+%FFFFFFFD)
041792 DD31FD              A  3989    	LD	IY,(IX+%FFFFFFFD)
041795 ED33FF              A  3990    	LEA	IY,IY+%FFFFFFFF
041798 DD3EFD              A  3991    	LD	(IX+%FFFFFFFD),IY
04179B CD 3A 1B 04         A  3992    	CALL	__icmpzero
04179F 20 EE               A  3993    	JR	NZ,L_59
                           A  3994    ;  394		return(getsysvar8bit(sysvar_cursorX
                           A  3995    .LINE 394
                           A  3996    
0417A1 01070000            A  3997    	LD	BC,7
0417A5 C5                  A  3998    	PUSH	BC
0417A6 CD 61 19 04         A  3999    	CALL	_getsysvar8bit
0417AA C1                  A  4000    	POP	BC
                           A  4001    ;  395	}
                           A  4002    .LINE 395
                           A  4003    
0417AB DDF9                A  4004    	LD	SP,IX
0417AD DDE1                A  4005    	POP	IX
0417AF C9                  A  4006    	RET	
                           A  4007    
                           A  4008    
                           A  4009    ;**************************** _vdp_cursorGetXpo
                           A  4010    ;Name                         Addr/Register   S
                           A  4011    ;_getsysvar8bit                      IMPORT  --
                           A  4012    ;_putch                              IMPORT  --
                           A  4013    ;delay                                 IX-3    
                           A  4014    
                           A  4015    
                           A  4016    ; Stack Frame Size: 9 (bytes)
                           A  4017    ;       Spill Code: 0 (instruction)
                           A  4018    
                           A  4019    
                           A  4020    .ENDFUNC "vdp_cursorGetXpos",395,"_vdp_cursorGe
                           A  4021    ;  396	
                           A  4022    ;  397	UINT8 vdp_cursorGetYpos(void)
                           A  4023    ;  398	{
0417B0                     A  4024    _vdp_cursorGetYpos:
                           A  4025    .DEFINE "_vdp_cursorGetYpos"
                           A  4026    
                           A  4027    .VALUE _vdp_cursorGetYpos
                           A  4028    
                           A  4029    .CLASS 2
                           A  4030    
                           A  4031    .TYPE 76
                           A  4032    
                           A  4033    .ENDEF
                           A  4034    
                           A  4035    .BEGFUNC "vdp_cursorGetYpos",398,"_vdp_cursorGe
                           A  4036    
                           A  4037    .LINE 398
                           A  4038    
                           A  4039    .DEFINE "delay"
                           A  4040    
                           A  4041    .CLASS 65
                           A  4042    
                           A  4043    .VALUE -3
                           A  4044    
                           A  4045    .TYPE 14
                           A  4046    
                           A  4047    .ENDEF
                           A  4048    
0417B0 DDE5                A  4049    	PUSH	IX
0417B2 DD210000 00         A  4050    	LD	IX,0
0417B7 DD39                A  4051    	ADD	IX,SP
0417B9 C5                  A  4052    	PUSH	BC
                           A  4053    ;  399		unsigned int delay;
                           A  4054    ;  400		
                           A  4055    ;  401		putch(23);	// VDP command
                           A  4056    .LINE 401
                           A  4057    
0417BA 01170000            A  4058    	LD	BC,23
0417BE C5                  A  4059    	PUSH	BC
0417BF CD 1F 19 04         A  4060    	CALL	_putch
0417C3 C1                  A  4061    	POP	BC
                           A  4062    ;  402		putch(0);	// VDP command
                           A  4063    .LINE 402
                           A  4064    
0417C4 01000000            A  4065    	LD	BC,0
0417C8 C5                  A  4066    	PUSH	BC
0417C9 CD 1F 19 04         A  4067    	CALL	_putch
0417CD C1                  A  4068    	POP	BC
                           A  4069    ;  403		putch(2);	// Request cursor posit
                           A  4070    .LINE 403
                           A  4071    
0417CE 01020000            A  4072    	LD	BC,2
0417D2 C5                  A  4073    	PUSH	BC
0417D3 CD 1F 19 04         A  4074    	CALL	_putch
0417D7 C1                  A  4075    	POP	BC
                           A  4076    ;  404		
                           A  4077    ;  405		delay = 255;
                           A  4078    .LINE 405
                           A  4079    
0417D8 01FF0000            A  4080    	LD	BC,255
0417DC DD0FFD              A  4081    	LD	(IX+%FFFFFFFD),BC
                           A  4082    ;  406		while(delay--);
0417DF                     A  4083    L_64:
                           A  4084    .LINE 406
                           A  4085    
0417DF DD27FD              A  4086    	LD	HL,(IX+%FFFFFFFD)
0417E2 DD31FD              A  4087    	LD	IY,(IX+%FFFFFFFD)
0417E5 ED33FF              A  4088    	LEA	IY,IY+%FFFFFFFF
0417E8 DD3EFD              A  4089    	LD	(IX+%FFFFFFFD),IY
0417EB CD 3A 1B 04         A  4090    	CALL	__icmpzero
0417EF 20 EE               A  4091    	JR	NZ,L_64
                           A  4092    ;  407		return(getsysvar8bit(sysvar_cursorY
                           A  4093    .LINE 407
                           A  4094    
0417F1 01080000            A  4095    	LD	BC,8
0417F5 C5                  A  4096    	PUSH	BC
0417F6 CD 61 19 04         A  4097    	CALL	_getsysvar8bit
0417FA C1                  A  4098    	POP	BC
                           A  4099    ;  408	}
                           A  4100    .LINE 408
                           A  4101    
0417FB DDF9                A  4102    	LD	SP,IX
0417FD DDE1                A  4103    	POP	IX
0417FF C9                  A  4104    	RET	
                           A  4105    
                           A  4106    
                           A  4107    ;**************************** _vdp_cursorGetYpo
                           A  4108    ;Name                         Addr/Register   S
                           A  4109    ;_getsysvar8bit                      IMPORT  --
                           A  4110    ;_putch                              IMPORT  --
                           A  4111    ;delay                                 IX-3    
                           A  4112    
                           A  4113    
                           A  4114    ; Stack Frame Size: 9 (bytes)
                           A  4115    ;       Spill Code: 0 (instruction)
                           A  4116    
                           A  4117    
                           A  4118    .ENDFUNC "vdp_cursorGetYpos",408,"_vdp_cursorGe
                           A  4119    ;  409	
                           A  4120    ;  410	char vdp_asciiCodeAt(unsigned char x, u
                           A  4121    ;  411	{
041800                     A  4122    _vdp_asciiCodeAt:
                           A  4123    .DEFINE "_vdp_asciiCodeAt"
                           A  4124    
                           A  4125    .VALUE _vdp_asciiCodeAt
                           A  4126    
                           A  4127    .CLASS 2
                           A  4128    
                           A  4129    .TYPE 66
                           A  4130    
                           A  4131    .ENDEF
                           A  4132    
                           A  4133    .BEGFUNC "vdp_asciiCodeAt",411,"_vdp_asciiCodeA
                           A  4134    
                           A  4135    .LINE 411
                           A  4136    
                           A  4137    .DEFINE "x"
                           A  4138    
                           A  4139    .CLASS 65
                           A  4140    
                           A  4141    .VALUE 6
                           A  4142    
                           A  4143    .TYPE 12
                           A  4144    
                           A  4145    .ENDEF
                           A  4146    
                           A  4147    .DEFINE "y"
                           A  4148    
                           A  4149    .CLASS 65
                           A  4150    
                           A  4151    .VALUE 9
                           A  4152    
                           A  4153    .TYPE 12
                           A  4154    
                           A  4155    .ENDEF
                           A  4156    
                           A  4157    .DEFINE "delay"
                           A  4158    
                           A  4159    .CLASS 65
                           A  4160    
                           A  4161    .VALUE -3
                           A  4162    
                           A  4163    .TYPE 14
                           A  4164    
                           A  4165    .ENDEF
                           A  4166    
041800 DDE5                A  4167    	PUSH	IX
041802 DD210000 00         A  4168    	LD	IX,0
041807 DD39                A  4169    	ADD	IX,SP
041809 C5                  A  4170    	PUSH	BC
                           A  4171    ;  412		unsigned int delay;
                           A  4172    ;  413		
                           A  4173    ;  414		putch(23);	// VDP command
                           A  4174    .LINE 414
                           A  4175    
04180A 01170000            A  4176    	LD	BC,23
04180E C5                  A  4177    	PUSH	BC
04180F CD 1F 19 04         A  4178    	CALL	_putch
041813 C1                  A  4179    	POP	BC
                           A  4180    ;  415		putch(0);	// VDP command
                           A  4181    .LINE 415
                           A  4182    
041814 01000000            A  4183    	LD	BC,0
041818 C5                  A  4184    	PUSH	BC
041819 CD 1F 19 04         A  4185    	CALL	_putch
04181D C1                  A  4186    	POP	BC
                           A  4187    ;  416		putch(3);	// Request ascii code a
                           A  4188    .LINE 416
                           A  4189    
04181E 01030000            A  4190    	LD	BC,3
041822 C5                  A  4191    	PUSH	BC
041823 CD 1F 19 04         A  4192    	CALL	_putch
041827 C1                  A  4193    	POP	BC
                           A  4194    ;  417		putch(x);
                           A  4195    .LINE 417
                           A  4196    
041828 DD7E06              A  4197    	LD	A,(IX+%6)
04182B B7ED62              A  4198    	UEXT	HL
04182E 6F                  A  4199    	LD	L,A
04182F E5                  A  4200    	PUSH	HL
041830 CD 1F 19 04         A  4201    	CALL	_putch
041834 C1                  A  4202    	POP	BC
                           A  4203    ;  418		putch(0);
                           A  4204    .LINE 418
                           A  4205    
041835 01000000            A  4206    	LD	BC,0
041839 C5                  A  4207    	PUSH	BC
04183A CD 1F 19 04         A  4208    	CALL	_putch
04183E C1                  A  4209    	POP	BC
                           A  4210    ;  419		putch(y);
                           A  4211    .LINE 419
                           A  4212    
04183F DD7E09              A  4213    	LD	A,(IX+%9)
041842 B7ED62              A  4214    	UEXT	HL
041845 6F                  A  4215    	LD	L,A
041846 E5                  A  4216    	PUSH	HL
041847 CD 1F 19 04         A  4217    	CALL	_putch
04184B C1                  A  4218    	POP	BC
                           A  4219    ;  420		putch(0);
                           A  4220    .LINE 420
                           A  4221    
04184C 01000000            A  4222    	LD	BC,0
041850 C5                  A  4223    	PUSH	BC
041851 CD 1F 19 04         A  4224    	CALL	_putch
041855 C1                  A  4225    	POP	BC
                           A  4226    ;  421		
                           A  4227    ;  422		delay = 64000;
                           A  4228    .LINE 422
                           A  4229    
041856 0100FA00            A  4230    	LD	BC,64000
04185A DD0FFD              A  4231    	LD	(IX+%FFFFFFFD),BC
                           A  4232    ;  423		while(delay--);
04185D                     A  4233    L_69:
                           A  4234    .LINE 423
                           A  4235    
04185D DD27FD              A  4236    	LD	HL,(IX+%FFFFFFFD)
041860 DD31FD              A  4237    	LD	IY,(IX+%FFFFFFFD)
041863 ED33FF              A  4238    	LEA	IY,IY+%FFFFFFFF
041866 DD3EFD              A  4239    	LD	(IX+%FFFFFFFD),IY
041869 CD 3A 1B 04         A  4240    	CALL	__icmpzero
04186D 20 EE               A  4241    	JR	NZ,L_69
                           A  4242    ;  424		return(getsysvar8bit(sysvar_scrchar
                           A  4243    .LINE 424
                           A  4244    
04186F 01090000            A  4245    	LD	BC,9
041873 C5                  A  4246    	PUSH	BC
041874 CD 61 19 04         A  4247    	CALL	_getsysvar8bit
041878 C1                  A  4248    	POP	BC
                           A  4249    ;  425	}
                           A  4250    .LINE 425
                           A  4251    
041879 DDF9                A  4252    	LD	SP,IX
04187B DDE1                A  4253    	POP	IX
04187D C9                  A  4254    	RET	
                           A  4255    
                           A  4256    
                           A  4257    ;**************************** _vdp_asciiCodeAt 
                           A  4258    ;Name                         Addr/Register   S
                           A  4259    ;_getsysvar8bit                      IMPORT  --
                           A  4260    ;_putch                              IMPORT  --
                           A  4261    ;delay                                 IX-3    
                           A  4262    ;y                                     IX+9    
                           A  4263    ;x                                     IX+6    
                           A  4264    
                           A  4265    
                           A  4266    ; Stack Frame Size: 15 (bytes)
                           A  4267    ;       Spill Code: 0 (instruction)
                           A  4268    
                           A  4269    
                           A  4270    .ENDFUNC "vdp_asciiCodeAt",425,"_vdp_asciiCodeA
                           A  4271    ;  426	
                           A  4272    ;  427	void vdp_cursorDisable(void)
                           A  4273    ;  428	{
04187E                     A  4274    _vdp_cursorDisable:
                           A  4275    .DEFINE "_vdp_cursorDisable"
                           A  4276    
                           A  4277    .VALUE _vdp_cursorDisable
                           A  4278    
                           A  4279    .CLASS 2
                           A  4280    
                           A  4281    .TYPE 65
                           A  4282    
                           A  4283    .ENDEF
                           A  4284    
                           A  4285    .BEGFUNC "vdp_cursorDisable",428,"_vdp_cursorDi
                           A  4286    
04187E DDE5                A  4287    	PUSH	IX
041880 DD210000 00         A  4288    	LD	IX,0
041885 DD39                A  4289    	ADD	IX,SP
                           A  4290    ;  429		putch(23);
                           A  4291    .LINE 429
                           A  4292    
041887 01170000            A  4293    	LD	BC,23
04188B C5                  A  4294    	PUSH	BC
04188C CD 1F 19 04         A  4295    	CALL	_putch
041890 C1                  A  4296    	POP	BC
                           A  4297    ;  430		putch(1);
                           A  4298    .LINE 430
                           A  4299    
041891 01010000            A  4300    	LD	BC,1
041895 C5                  A  4301    	PUSH	BC
041896 CD 1F 19 04         A  4302    	CALL	_putch
04189A C1                  A  4303    	POP	BC
                           A  4304    ;  431		putch(0);
                           A  4305    .LINE 431
                           A  4306    
04189B 01000000            A  4307    	LD	BC,0
04189F C5                  A  4308    	PUSH	BC
0418A0 CD 1F 19 04         A  4309    	CALL	_putch
0418A4 C1                  A  4310    	POP	BC
                           A  4311    ;  432	}
                           A  4312    .LINE 432
                           A  4313    
0418A5 DDF9                A  4314    	LD	SP,IX
0418A7 DDE1                A  4315    	POP	IX
0418A9 C9                  A  4316    	RET	
                           A  4317    
                           A  4318    
                           A  4319    ;**************************** _vdp_cursorDisabl
                           A  4320    ;Name                         Addr/Register   S
                           A  4321    ;_putch                              IMPORT  --
                           A  4322    
                           A  4323    
                           A  4324    ; Stack Frame Size: 6 (bytes)
                           A  4325    ;       Spill Code: 0 (instruction)
                           A  4326    
                           A  4327    
                           A  4328    .ENDFUNC "vdp_cursorDisable",432,"_vdp_cursorDi
                           A  4329    ;  433	
                           A  4330    ;  434	void vdp_cursorEnable(void)
                           A  4331    ;  435	{
0418AA                     A  4332    _vdp_cursorEnable:
                           A  4333    .DEFINE "_vdp_cursorEnable"
                           A  4334    
                           A  4335    .VALUE _vdp_cursorEnable
                           A  4336    
                           A  4337    .CLASS 2
                           A  4338    
                           A  4339    .TYPE 65
                           A  4340    
                           A  4341    .ENDEF
                           A  4342    
                           A  4343    .BEGFUNC "vdp_cursorEnable",435,"_vdp_cursorEna
                           A  4344    
0418AA DDE5                A  4345    	PUSH	IX
0418AC DD210000 00         A  4346    	LD	IX,0
0418B1 DD39                A  4347    	ADD	IX,SP
                           A  4348    ;  436		putch(23);
                           A  4349    .LINE 436
                           A  4350    
0418B3 01170000            A  4351    	LD	BC,23
0418B7 C5                  A  4352    	PUSH	BC
0418B8 CD 1F 19 04         A  4353    	CALL	_putch
0418BC C1                  A  4354    	POP	BC
                           A  4355    ;  437		putch(1);
                           A  4356    .LINE 437
                           A  4357    
0418BD 01010000            A  4358    	LD	BC,1
0418C1 C5                  A  4359    	PUSH	BC
0418C2 CD 1F 19 04         A  4360    	CALL	_putch
0418C6 C1                  A  4361    	POP	BC
                           A  4362    ;  438		putch(1);
                           A  4363    .LINE 438
                           A  4364    
0418C7 01010000            A  4365    	LD	BC,1
0418CB C5                  A  4366    	PUSH	BC
0418CC CD 1F 19 04         A  4367    	CALL	_putch
0418D0 C1                  A  4368    	POP	BC
                           A  4369    ;  439	}
                           A  4370    .LINE 439
                           A  4371    
0418D1 DDF9                A  4372    	LD	SP,IX
0418D3 DDE1                A  4373    	POP	IX
0418D5 C9                  A  4374    	RET	
                           A  4375    
                           A  4376    
                           A  4377    ;**************************** _vdp_cursorEnable
                           A  4378    ;Name                         Addr/Register   S
                           A  4379    ;_putch                              IMPORT  --
                           A  4380    
                           A  4381    
                           A  4382    ; Stack Frame Size: 6 (bytes)
                           A  4383    ;       Spill Code: 0 (instruction)
                           A  4384    
                           A  4385    
                           A  4386    .ENDFUNC "vdp_cursorEnable",439,"_vdp_cursorEna
                           A  4387    ;  440	
                           A  4388    ;  441	void vdp_scroll(unsigned char extent, u
                           A  4389    ;  442	{
0418D6                     A  4390    _vdp_scroll:
                           A  4391    .DEFINE "_vdp_scroll"
                           A  4392    
                           A  4393    .VALUE _vdp_scroll
                           A  4394    
                           A  4395    .CLASS 2
                           A  4396    
                           A  4397    .TYPE 65
                           A  4398    
                           A  4399    .ENDEF
                           A  4400    
                           A  4401    .BEGFUNC "vdp_scroll",442,"_vdp_scroll"
                           A  4402    
                           A  4403    .LINE 442
                           A  4404    
                           A  4405    .DEFINE "extent"
                           A  4406    
                           A  4407    .CLASS 65
                           A  4408    
                           A  4409    .VALUE 6
                           A  4410    
                           A  4411    .TYPE 12
                           A  4412    
                           A  4413    .ENDEF
                           A  4414    
                           A  4415    .DEFINE "direction"
                           A  4416    
                           A  4417    .CLASS 65
                           A  4418    
                           A  4419    .VALUE 9
                           A  4420    
                           A  4421    .TYPE 12
                           A  4422    
                           A  4423    .ENDEF
                           A  4424    
                           A  4425    .DEFINE "speed"
                           A  4426    
                           A  4427    .CLASS 65
                           A  4428    
                           A  4429    .VALUE 12
                           A  4430    
                           A  4431    .TYPE 12
                           A  4432    
                           A  4433    .ENDEF
                           A  4434    
0418D6 DDE5                A  4435    	PUSH	IX
0418D8 DD210000 00         A  4436    	LD	IX,0
0418DD DD39                A  4437    	ADD	IX,SP
                           A  4438    ;  443		putch(23);
                           A  4439    .LINE 443
                           A  4440    
0418DF 01170000            A  4441    	LD	BC,23
0418E3 C5                  A  4442    	PUSH	BC
0418E4 CD 1F 19 04         A  4443    	CALL	_putch
0418E8 C1                  A  4444    	POP	BC
                           A  4445    ;  444		putch(7);	// scroll
                           A  4446    .LINE 444
                           A  4447    
0418E9 01070000            A  4448    	LD	BC,7
0418ED C5                  A  4449    	PUSH	BC
0418EE CD 1F 19 04         A  4450    	CALL	_putch
0418F2 C1                  A  4451    	POP	BC
                           A  4452    ;  445		putch(extent);
                           A  4453    .LINE 445
                           A  4454    
0418F3 DD7E06              A  4455    	LD	A,(IX+%6)
0418F6 B7ED62              A  4456    	UEXT	HL
0418F9 6F                  A  4457    	LD	L,A
0418FA E5                  A  4458    	PUSH	HL
0418FB CD 1F 19 04         A  4459    	CALL	_putch
0418FF C1                  A  4460    	POP	BC
                           A  4461    ;  446		putch(direction);
                           A  4462    .LINE 446
                           A  4463    
041900 DD7E09              A  4464    	LD	A,(IX+%9)
041903 B7ED62              A  4465    	UEXT	HL
041906 6F                  A  4466    	LD	L,A
041907 E5                  A  4467    	PUSH	HL
041908 CD 1F 19 04         A  4468    	CALL	_putch
04190C C1                  A  4469    	POP	BC
                           A  4470    ;  447		putch(speed);
                           A  4471    .LINE 447
                           A  4472    
04190D DD7E0C              A  4473    	LD	A,(IX+%C)
041910 B7ED62              A  4474    	UEXT	HL
041913 6F                  A  4475    	LD	L,A
041914 E5                  A  4476    	PUSH	HL
041915 CD 1F 19 04         A  4477    	CALL	_putch
041919 C1                  A  4478    	POP	BC
                           A  4479    .LINE 448
                           A  4480    
04191A DDF9                A  4481    	LD	SP,IX
04191C DDE1                A  4482    	POP	IX
04191E C9                  A  4483    	RET	
                           A  4484    
                           A  4485    
                           A  4486    ;**************************** _vdp_scroll *****
                           A  4487    ;Name                         Addr/Register   S
                           A  4488    ;_putch                              IMPORT  --
                           A  4489    ;speed                                IX+12    
                           A  4490    ;direction                             IX+9    
                           A  4491    ;extent                                IX+6    
                           A  4492    
                           A  4493    
                           A  4494    ; Stack Frame Size: 15 (bytes)
                           A  4495    ;       Spill Code: 0 (instruction)
                           A  4496    
                           A  4497    
                           A  4498    .ENDFUNC "vdp_scroll",448,"_vdp_scroll"
                           A  4499    	XREF _getsysvar8bit:ROM
                           A  4500    	XREF _putch:ROM
                           A  4501    	XREF __imuls:ROM
                           A  4502    	XREF __lshru:ROM
                           A  4503    	XREF __stoiu:ROM
                           A  4504    	XREF __icmpzero:ROM
                           A  4505    	XREF __ishru_b:ROM
                           A  4506    	XREF __ishrs_b:ROM
                           A  4507    	XDEF _vdp_scroll
                           A  4508    	XDEF _vdp_cursorEnable
                           A  4509    	XDEF _vdp_cursorDisable
                           A  4510    	XDEF _vdp_asciiCodeAt
                           A  4511    	XDEF _vdp_cursorGetYpos
                           A  4512    	XDEF _vdp_cursorGetXpos
                           A  4513    	XDEF _vdp_spriteRefresh
                           A  4514    	XDEF _vdp_spriteActivateTotal
                           A  4515    	XDEF _vdp_spriteMoveBy
                           A  4516    	XDEF _vdp_spriteMoveBySelected
                           A  4517    	XDEF _vdp_spriteMoveTo
                           A  4518    	XDEF _vdp_spriteMoveToSelected
                           A  4519    	XDEF _vdp_spriteHide
                           A  4520    	XDEF _vdp_spriteHideSelected
                           A  4521    	XDEF _vdp_spriteShow
                           A  4522    	XDEF _vdp_spriteShowSelected
                           A  4523    	XDEF _vdp_spriteSetFrame
                           A  4524    	XDEF _vdp_spriteSetFrameSelected
                           A  4525    	XDEF _vdp_spritePreviousFrame
                           A  4526    	XDEF _vdp_spritePreviousFrameSelected
                           A  4527    	XDEF _vdp_spriteNextFrame
                           A  4528    	XDEF _vdp_spriteNextFrameSelected
                           A  4529    	XDEF _vdp_spriteAddFrame
                           A  4530    	XDEF _vdp_spriteAddFrameSelected
                           A  4531    	XDEF _vdp_spriteClearFrames
                           A  4532    	XDEF _vdp_spriteClearFramesSelected
                           A  4533    	XDEF _vdp_spriteSelect
                           A  4534    	XDEF _vdp_bitmapCreateSolidColor
                           A  4535    	XDEF _vdp_bitmapCreateSolidColorSelected
                           A  4536    	XDEF _vdp_bitmapDraw
                           A  4537    	XDEF _vdp_bitmapDrawSelected
                           A  4538    	XDEF _vdp_bitmapSendData
                           A  4539    	XDEF _vdp_bitmapSendDataSelected
                           A  4540    	XDEF _vdp_bitmapSelect
                           A  4541    	XDEF _vdp_plotSetOrigin
                           A  4542    	XDEF _vdp_plotCircleCircumference
                           A  4543    	XDEF _vdp_plotCircleRadius
                           A  4544    	XDEF _vdp_plotTriangle
                           A  4545    	XDEF _vdp_plotPoint
                           A  4546    	XDEF _vdp_plotLineTo
                           A  4547    	XDEF _vdp_plotMoveTo
                           A  4548    	XDEF _vdp_plot
                           A  4549    	XDEF _vdp_plotColour
                           A  4550    	XDEF _vdp_clearGraphics
                           A  4551    	XDEF _vdp_bgcolour
                           A  4552    	XDEF _vdp_fgcolour
                           A  4553    	XDEF _vdp_colour
                           A  4554    	XDEF _vdp_cursorGoto
                           A  4555    	XDEF _vdp_cursorUp
                           A  4556    	XDEF _vdp_cursorHome
                           A  4557    	XDEF _vdp_cls
                           A  4558    	XDEF _vdp_mode
                           A  4559    	XDEF _write32bit
                           A  4560    	XDEF _write16bit
                           A  4561    	END


Errors: 0
Warnings: 0
Lines Assembled: 4562
